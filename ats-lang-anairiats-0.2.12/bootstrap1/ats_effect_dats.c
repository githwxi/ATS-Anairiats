/*
**
** The C code is generated by ATS/Anairiats
** The compilation time is: 2016-8-25: 20h:18m
**
*/

/* include some .h files */
#ifndef _ATS_HEADER_NONE
#include "ats_config.h"
#include "ats_basics.h"
#include "ats_types.h"
#include "ats_exception.h"
#include "ats_memory.h"
#endif /* _ATS_HEADER_NONE */

/* include some .cats files */
#ifndef _ATS_PRELUDE_NONE
#include "prelude/CATS/basics.cats"
#include "prelude/CATS/bool.cats"
#include "prelude/CATS/char.cats"
#include "prelude/CATS/byte.cats"
#include "prelude/CATS/float.cats"
#include "prelude/CATS/integer.cats"
#include "prelude/CATS/integer_ptr.cats"
#include "prelude/CATS/integer_fixed.cats"
#include "prelude/CATS/sizetype.cats"
#include "prelude/CATS/pointer.cats"
#include "prelude/CATS/reference.cats"
#include "prelude/CATS/string.cats"
#include "prelude/CATS/lazy.cats"
#include "prelude/CATS/lazy_vt.cats"
#include "prelude/CATS/printf.cats"
#include "prelude/CATS/list.cats"
#include "prelude/CATS/option.cats"
#include "prelude/CATS/array.cats"
#include "prelude/CATS/matrix.cats"
#endif /* _ATS_PRELUDE_NONE */
/* prologues from statically loaded files */
/* external codes at top */
/* type definitions */
typedef struct {
ats_int_type atslab_0 ;
ats_ptr_type atslab_1 ;
} anairiats_sum_0 ;

typedef
struct {
ats_ptr_type atslab_d0exp_loc ;
ats_ptr_type atslab_d0exp_node ;
} anairiats_rec_1 ;

typedef struct {
int tag ;
ats_ptr_type atslab_0 ;
} anairiats_sum_2 ;

typedef struct {
ats_ptr_type atslab_0 ;
ats_ptr_type atslab_1 ;
} anairiats_sum_3 ;

typedef struct {
int tag ;
ats_uint_type atslab_0 ;
ats_ptr_type atslab_1 ;
} anairiats_sum_4 ;

typedef
struct {
ats_ptr_type atslab_e0fftag_loc ;
ats_ptr_type atslab_e0fftag_node ;
} anairiats_rec_5 ;

typedef struct {
int tag ;
ats_int_type atslab_0 ;
ats_ptr_type atslab_1 ;
} anairiats_sum_6 ;

typedef struct {
int tag ;
ats_int_type atslab_0 ;
} anairiats_sum_7 ;

typedef struct {
int tag ;
ats_int_type atslab_0 ;
ats_int_type atslab_1 ;
} anairiats_sum_8 ;

typedef struct {
ats_ptr_type atslab_0 ;
} anairiats_sum_9 ;

typedef struct {
int tag ;
ats_int_type atslab_0 ;
ats_int_type atslab_1 ;
ats_int_type atslab_2 ;
} anairiats_sum_10 ;

typedef struct {
ats_int_type atslab_0 ;
} anairiats_sum_11 ;

typedef
struct {
ats_ptr_type atslab_0 ;
ats_int_type atslab_1 ;
ats_int_type atslab_2 ;
ats_ptr_type atslab_3 ;
} anairiats_rec_12 ;

/* external typedefs */
typedef ats_uint_type atsopt_effset_t ;
typedef ats_int_type atsopt_effect_t ;

/* external dynamic constructor declarations */
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2prelude_2basics_sta_2esats__list_cons_0) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2prelude_2basics_sta_2esats__list_nil_1) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2prelude_2basics_sta_2esats__None_0) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2prelude_2basics_sta_2esats__Some_1) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__FUNCLOclo_0) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__FUNCLOfun_1) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGcst_0) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGvar_1) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGprf_2) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGlin_3) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGfun_4) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__E0FFTAGclo_5) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__D0Eeffmask_12) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__EFFCSTall_0) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__EFFCSTnil_1) ;
ATSextern_val(ats_sum_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__EFFCSTset_2) ;

/* external dynamic constant declarations */
ATSextern_fun(ats_ptr_type, atspre_stdout_get) () ;
ATSextern_fun(ats_void_type, atspre_stdout_view_set) () ;
ATSextern_fun(ats_ptr_type, atspre_stderr_get) () ;
ATSextern_fun(ats_void_type, atspre_stderr_view_set) () ;
ATSextern_fun(ats_void_type, atspre_prerr_newline) () ;
ATSextern_fun(ats_int_type, atspre_add_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_sub_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_gt_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_gte_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_eq_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_asl_int_int1) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_void_type, atspre_fprint_int) (ats_ref_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_eq_uint_uint) (ats_uint_type, ats_uint_type) ;
ATSextern_fun(ats_bool_type, atspre_eq_string_string) (ats_ptr_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_fprint_string) (ats_ref_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_prerr_string) (ats_ptr_type) ;
ATSextern_fun(ats_varet_type, ATS_2d0_2e2_2e12_2src_2ats_error_2esats__abort) () ;
ATSextern_fun(ats_void_type, ATS_2d0_2e2_2e12_2src_2ats_location_2esats__prerr_location) (ats_ptr_type) ;
ATSextern_fun(ats_void_type, ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__fprint_i0de) (ats_ref_type, ats_ptr_type) ;
ATSextern_val(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_exn) ;
ATSextern_val(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ntm) ;
ATSextern_val(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ref) ;
ATSextern_val(ats_ptr_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effectlst_all) ;
ATSextern_fun(ats_void_type, atsopt_fprint_effect) (ats_ref_type, ats_int_type) ;
ATSextern_val(ats_uint_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all) ;
ATSextern_val(ats_uint_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil) ;
ATSextern_fun(ats_bool_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset) (ats_uint_type, ats_uint_type) ;
ATSextern_fun(ats_void_type, atsopt_fprint_effset) (ats_ref_type, ats_uint_type) ;
ATSextern_fun(ats_uint_type, atsopt_effset_add) (ats_uint_type, ats_int_type) ;
ATSextern_fun(ats_uint_type, atsopt_effset_del) (ats_uint_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atsopt_effset_contain) (ats_uint_type, ats_int_type) ;
ATSextern_fun(ats_void_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst) (ats_ref_type, ats_ptr_type) ;
ATSextern_fun(ats_bool_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain) (ats_ptr_type, ats_int_type) ;

/* external dynamic terminating constant declarations */
#ifdef _ATS_PROOFCHECK
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2basics_dyn_2esats__file_mode_lte_w_w_prfck () ;
#endif /* _ATS_PROOFCHECK */

/* assuming abstract types */
int ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__sasp__effset_t = 0 ;
int ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__sasp__effect_t = 0 ;

/* sum constructor declarations */
/* exn constructor declarations */
/* global dynamic (non-functional) constant declarations */
ATSglobal(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_exn) ;
ATSglobal(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ntm) ;
ATSglobal(ats_int_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ref) ;
ATSglobal(ats_ptr_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effectlst_all) ;
ATSglobal(ats_uint_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all) ;
ATSglobal(ats_uint_type, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil) ;

/* internal function declarations */
static
ats_void_type aux_3 (ats_int_type arg0, ats_ref_type arg1, ats_ptr_type arg2) ;
static
ats_void_type aux_12 (ats_ref_type arg0, ats_int_type arg1, ats_ptr_type arg2) ;
static
ats_void_type fprint_effvarlst_11 (ats_ref_type arg0, ats_ptr_type arg1) ;
static
ats_bool_type name_is_emp_18 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_all_19 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_exn_20 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_exnref_21 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_ntm_22 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_ref_23 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_term_24 (ats_ptr_type arg0) ;
static
ats_bool_type name_is_lazy_25 (ats_ptr_type arg0) ;
static
ats_void_type loop_err_26 (ats_ptr_type arg0, ats_ptr_type arg1) ;
static
ats_void_type loop_27 (ats_ref_type arg0, ats_ref_type arg1, ats_ref_type arg2, ats_ref_type arg3, ats_ref_type arg4, ats_ptr_type arg5) ;

/* partial value template declarations */
/* static temporary variable declarations */
ATSstatic (ats_ptr_type, statmp0) ;
ATSstatic (ats_ptr_type, statmp1) ;
ATSstatic (ats_ptr_type, statmp2) ;
ATSstatic (ats_int_type, statmp26) ;
ATSstatic (ats_int_type, statmp27) ;
ATSstatic (ats_ptr_type, statmp50) ;

/* external value variable declarations */

/* function implementations */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 2604(line=91, offs=3) -- 2642(line=91, offs=41)
*/
ATSglobaldec()
ats_bool_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effect_effect (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_bool_type, tmp3) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effect_effect:
tmp3 = atspre_eq_int_int (arg0, arg1) ;
return (tmp3) ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effect_effect] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 2699(line=96, offs=3) -- 3096(line=108, offs=4)
*/
ATSglobaldec()
ats_void_type
atsopt_fprint_effect (ats_ref_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp4) ;
ATSlocal (ats_bool_type, tmp5) ;
ATSlocal (ats_bool_type, tmp6) ;
ATSlocal (ats_bool_type, tmp7) ;
// ATSlocal_void (tmp8) ;
// ATSlocal_void (tmp9) ;

__ats_lab_atsopt_fprint_effect:
tmp5 = atspre_eq_int_int (arg1, 1) ;
if (tmp5) {
/* tmp4 = */ atspre_fprint_string (arg0, ATSstrcst("exn")) ;
} else {
tmp6 = atspre_eq_int_int (arg1, 2) ;
if (tmp6) {
/* tmp4 = */ atspre_fprint_string (arg0, ATSstrcst("ntm")) ;
} else {
tmp7 = atspre_eq_int_int (arg1, 3) ;
if (tmp7) {
/* tmp4 = */ atspre_fprint_string (arg0, ATSstrcst("ref")) ;
} else {
/* tmp8 = */ atspre_fprint_string (arg0, ATSstrcst("eff(")) ;
/* tmp9 = */ atspre_fprint_int (arg0, arg1) ;
/* tmp4 = */ atspre_fprint_string (arg0, ATSstrcst(")")) ;
} /* end of [if] */
} /* end of [if] */
} /* end of [if] */
return /* (tmp4) */ ;
} /* end of [atsopt_fprint_effect] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 3186(line=113, offs=7) -- 3463(line=119, offs=24)
*/
ATSstaticdec()
ats_void_type
aux_3 (ats_int_type arg0, ats_ref_type arg1, ats_ptr_type arg2) {
/* local vardec */
// ATSlocal_void (tmp11) ;
ATSlocal (ats_int_type, tmp12) ;
ATSlocal (ats_ptr_type, tmp13) ;
// ATSlocal_void (tmp14) ;
ATSlocal (ats_bool_type, tmp15) ;
// ATSlocal_void (tmp16) ;
ATSlocal (ats_int_type, tmp17) ;

__ats_lab_aux_3:
do {
/* branch: __ats_lab_0 */
__ats_lab_0_0:
if (arg2 == (ats_sum_ptr_type)0) { goto __ats_lab_1_0 ; }
__ats_lab_0_1:
tmp12 = ats_caselptrlab_mac(anairiats_sum_0, arg2, atslab_0) ;
tmp13 = ats_caselptrlab_mac(anairiats_sum_0, arg2, atslab_1) ;
tmp15 = atspre_gt_int_int (arg0, 0) ;
if (tmp15) {
/* tmp14 = */ atspre_fprint_string (arg1, ATSstrcst(", ")) ;
} else {
/* empty */
} /* end of [if] */
/* tmp16 = */ atsopt_fprint_effect (arg1, tmp12) ;
tmp17 = atspre_add_int_int (arg0, 1) ;
arg0 = tmp17 ;
arg1 = arg1 ;
arg2 = tmp13 ;
goto __ats_lab_aux_3 ; // tail call
break ;

/* branch: __ats_lab_1 */
__ats_lab_1_0:
// if (arg2 != (ats_sum_ptr_type)0) { ats_deadcode_failure_handle () ; }
__ats_lab_1_1:
break ;
} while (0) ;
return /* (tmp11) */ ;
} /* end of [aux_3] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 3157(line=112, offs=7) -- 3530(line=123, offs=4)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effectlst (ats_ref_type arg0, ats_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp10) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effectlst:
/* tmp10 = */ aux_3 (0, arg0, arg1) ;
return /* (tmp10) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effectlst] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 3605(line=127, offs=24) -- 3643(line=127, offs=62)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effect (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp18) ;
ATSlocal (ats_ptr_type, tmp19) ;
ATSlocal (ats_ptr_type, tmp20) ;
// ATSlocal_void (tmp21) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effect:
tmp19 = atspre_stdout_get () ;
tmp20 = ats_selsin_mac(tmp19, atslab_1) ;
/* tmp21 = */ atsopt_fprint_effect (tmp20, arg0) ;
/* tmp18 = */ atspre_stdout_view_set () ;
return /* (tmp18) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effect] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 3667(line=128, offs=24) -- 3705(line=128, offs=62)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effect (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp22) ;
ATSlocal (ats_ptr_type, tmp23) ;
ATSlocal (ats_ptr_type, tmp24) ;
// ATSlocal_void (tmp25) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effect:
tmp23 = atspre_stderr_get () ;
tmp24 = ats_selsin_mac(tmp23, atslab_1) ;
/* tmp25 = */ atsopt_fprint_effect (tmp24, arg0) ;
/* tmp22 = */ atspre_stderr_view_set () ;
return /* (tmp22) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effect] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 4123(line=145, offs=28) -- 4163(line=145, offs=68)
*/
ATSglobaldec()
ats_bool_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset (ats_uint_type arg0, ats_uint_type arg1) {
/* local vardec */
ATSlocal (ats_bool_type, tmp28) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset:
tmp28 = atspre_eq_uint_uint (arg0, arg1) ;
return (tmp28) ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 5735(line=227, offs=24) -- 5818(line=229, offs=2)
*/
ATSglobaldec()
ats_ptr_type
d0exp_effmask_all (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp29) ;
ATSlocal (ats_ptr_type, tmp30) ;
ATSlocal (ats_ptr_type, tmp31) ;

__ats_lab_d0exp_effmask_all:
tmp30 = ats_selsin_mac(arg0, atslab_t0kn_loc) ;
tmp31 = ATS_MALLOC(sizeof(anairiats_sum_2)) ;
((ats_sum_ptr_type)tmp31)->tag = 12 ;
ats_selptrset_mac(anairiats_sum_2, tmp31, atslab_0, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effectlst_all) ;
tmp29 = ATS_MALLOC(sizeof(anairiats_rec_1)) ;
ats_selptrset_mac(anairiats_rec_1, tmp29, atslab_d0exp_loc, tmp30) ;
ats_selptrset_mac(anairiats_rec_1, tmp29, atslab_d0exp_node, tmp31) ;

return (tmp29) ;
} /* end of [d0exp_effmask_all] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 5883(line=232, offs=24) -- 5966(line=234, offs=2)
*/
ATSglobaldec()
ats_ptr_type
d0exp_effmask_exn (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp32) ;
ATSlocal (ats_ptr_type, tmp33) ;
ATSlocal (ats_ptr_type, tmp34) ;
ATSlocal (ats_ptr_type, tmp35) ;
ATSlocal (ats_ptr_type, tmp36) ;
ATSlocal (ats_ptr_type, tmp37) ;

__ats_lab_d0exp_effmask_exn:
tmp33 = ats_selsin_mac(arg0, atslab_t0kn_loc) ;
tmp35 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, tmp35, atslab_0, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_exn) ;
tmp36 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, tmp35), atslab_1) ;
tmp37 = (ats_sum_ptr_type)0 ;
ats_ptrget_mac(ats_ptr_type, tmp36) = tmp37 ;
tmp34 = ATS_MALLOC(sizeof(anairiats_sum_2)) ;
((ats_sum_ptr_type)tmp34)->tag = 12 ;
ats_selptrset_mac(anairiats_sum_2, tmp34, atslab_0, tmp35) ;
tmp32 = ATS_MALLOC(sizeof(anairiats_rec_1)) ;
ats_selptrset_mac(anairiats_rec_1, tmp32, atslab_d0exp_loc, tmp33) ;
ats_selptrset_mac(anairiats_rec_1, tmp32, atslab_d0exp_node, tmp34) ;

return (tmp32) ;
} /* end of [d0exp_effmask_exn] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 6031(line=237, offs=24) -- 6114(line=239, offs=2)
*/
ATSglobaldec()
ats_ptr_type
d0exp_effmask_ntm (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp38) ;
ATSlocal (ats_ptr_type, tmp39) ;
ATSlocal (ats_ptr_type, tmp40) ;
ATSlocal (ats_ptr_type, tmp41) ;
ATSlocal (ats_ptr_type, tmp42) ;
ATSlocal (ats_ptr_type, tmp43) ;

__ats_lab_d0exp_effmask_ntm:
tmp39 = ats_selsin_mac(arg0, atslab_t0kn_loc) ;
tmp41 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, tmp41, atslab_0, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ntm) ;
tmp42 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, tmp41), atslab_1) ;
tmp43 = (ats_sum_ptr_type)0 ;
ats_ptrget_mac(ats_ptr_type, tmp42) = tmp43 ;
tmp40 = ATS_MALLOC(sizeof(anairiats_sum_2)) ;
((ats_sum_ptr_type)tmp40)->tag = 12 ;
ats_selptrset_mac(anairiats_sum_2, tmp40, atslab_0, tmp41) ;
tmp38 = ATS_MALLOC(sizeof(anairiats_rec_1)) ;
ats_selptrset_mac(anairiats_rec_1, tmp38, atslab_d0exp_loc, tmp39) ;
ats_selptrset_mac(anairiats_rec_1, tmp38, atslab_d0exp_node, tmp40) ;

return (tmp38) ;
} /* end of [d0exp_effmask_ntm] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 6179(line=242, offs=24) -- 6262(line=244, offs=2)
*/
ATSglobaldec()
ats_ptr_type
d0exp_effmask_ref (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp44) ;
ATSlocal (ats_ptr_type, tmp45) ;
ATSlocal (ats_ptr_type, tmp46) ;
ATSlocal (ats_ptr_type, tmp47) ;
ATSlocal (ats_ptr_type, tmp48) ;
ATSlocal (ats_ptr_type, tmp49) ;

__ats_lab_d0exp_effmask_ref:
tmp45 = ats_selsin_mac(arg0, atslab_t0kn_loc) ;
tmp47 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, tmp47, atslab_0, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ref) ;
tmp48 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, tmp47), atslab_1) ;
tmp49 = (ats_sum_ptr_type)0 ;
ats_ptrget_mac(ats_ptr_type, tmp48) = tmp49 ;
tmp46 = ATS_MALLOC(sizeof(anairiats_sum_2)) ;
((ats_sum_ptr_type)tmp46)->tag = 12 ;
ats_selptrset_mac(anairiats_sum_2, tmp46, atslab_0, tmp47) ;
tmp44 = ATS_MALLOC(sizeof(anairiats_rec_1)) ;
ats_selptrset_mac(anairiats_rec_1, tmp44, atslab_d0exp_loc, tmp45) ;
ats_selptrset_mac(anairiats_rec_1, tmp44, atslab_d0exp_node, tmp46) ;

return (tmp44) ;
} /* end of [d0exp_effmask_ref] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 6478(line=256, offs=7) -- 6737(line=262, offs=19)
*/
ATSstaticdec()
ats_void_type
aux_12 (ats_ref_type arg0, ats_int_type arg1, ats_ptr_type arg2) {
/* local vardec */
// ATSlocal_void (tmp52) ;
ATSlocal (ats_ptr_type, tmp53) ;
ATSlocal (ats_ptr_type, tmp54) ;
// ATSlocal_void (tmp55) ;
ATSlocal (ats_bool_type, tmp56) ;
// ATSlocal_void (tmp57) ;
ATSlocal (ats_int_type, tmp58) ;

__ats_lab_aux_12:
do {
/* branch: __ats_lab_2 */
__ats_lab_2_0:
if (arg2 == (ats_sum_ptr_type)0) { goto __ats_lab_3_0 ; }
__ats_lab_2_1:
tmp53 = ats_caselptrlab_mac(anairiats_sum_3, arg2, atslab_0) ;
tmp54 = ats_caselptrlab_mac(anairiats_sum_3, arg2, atslab_1) ;
tmp56 = atspre_gt_int_int (arg1, 0) ;
if (tmp56) {
/* tmp55 = */ atspre_fprint_string (arg0, ATSstrcst(", ")) ;
} else {
/* empty */
} /* end of [if] */
/* tmp57 = */ ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__fprint_i0de (arg0, tmp53) ;
tmp58 = atspre_add_int_int (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp58 ;
arg2 = tmp54 ;
goto __ats_lab_aux_12 ; // tail call
break ;

/* branch: __ats_lab_3 */
__ats_lab_3_0:
// if (arg2 != (ats_sum_ptr_type)0) { ats_deadcode_failure_handle () ; }
__ats_lab_3_1:
break ;
} while (0) ;
return /* (tmp52) */ ;
} /* end of [aux_12] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 6356(line=250, offs=5) -- 6782(line=266, offs=4)
*/
ATSstaticdec()
ats_void_type
fprint_effvarlst_11 (ats_ref_type arg0, ats_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp51) ;

__ats_lab_fprint_effvarlst_11:
/* tmp51 = */ aux_12 (arg0, 0, arg1) ;
return /* (tmp51) */ ;
} /* end of [fprint_effvarlst_11] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 6839(line=270, offs=3) -- 7241(line=280, offs=4)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst (ats_ref_type arg0, ats_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp59) ;
ATSlocal (ats_uint_type, tmp60) ;
ATSlocal (ats_ptr_type, tmp61) ;
// ATSlocal_void (tmp62) ;
// ATSlocal_void (tmp63) ;
// ATSlocal_void (tmp64) ;
// ATSlocal_void (tmp65) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst:
do {
/* branch: __ats_lab_4 */
__ats_lab_4_0:
if (((ats_sum_ptr_type)arg1)->tag != 0) { goto __ats_lab_5_0 ; }
__ats_lab_4_1:
/* tmp59 = */ atspre_fprint_string (arg0, ATSstrcst("all")) ;
break ;

/* branch: __ats_lab_5 */
__ats_lab_5_0:
if (((ats_sum_ptr_type)arg1)->tag != 1) { goto __ats_lab_6_0 ; }
__ats_lab_5_1:
/* tmp59 = */ atspre_fprint_string (arg0, ATSstrcst("nil")) ;
break ;

/* branch: __ats_lab_6 */
__ats_lab_6_0:
// if (((ats_sum_ptr_type)arg1)->tag != 2) { ats_deadcode_failure_handle () ; }
__ats_lab_6_1:
tmp60 = ats_caselptrlab_mac(anairiats_sum_4, arg1, atslab_0) ;
tmp61 = ats_caselptrlab_mac(anairiats_sum_4, arg1, atslab_1) ;
/* tmp62 = */ atspre_fprint_string (arg0, ATSstrcst("set(")) ;
/* tmp63 = */ atsopt_fprint_effset (arg0, tmp60) ;
/* tmp64 = */ atspre_fprint_string (arg0, ATSstrcst("; ")) ;
/* tmp65 = */ fprint_effvarlst_11 (arg0, tmp61) ;
/* tmp59 = */ atspre_fprint_string (arg0, ATSstrcst(")")) ;
break ;
} while (0) ;
return /* (tmp59) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7313(line=285, offs=14) -- 7351(line=285, offs=52)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effcst (ats_ptr_type arg0) {
/* local vardec */
// ATSlocal_void (tmp66) ;
ATSlocal (ats_ptr_type, tmp67) ;
ATSlocal (ats_ptr_type, tmp68) ;
// ATSlocal_void (tmp69) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effcst:
tmp67 = atspre_stdout_get () ;
tmp68 = ats_selsin_mac(tmp67, atslab_1) ;
/* tmp69 = */ ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst (tmp68, arg0) ;
/* tmp66 = */ atspre_stdout_view_set () ;
return /* (tmp66) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__print_effcst] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7375(line=287, offs=14) -- 7413(line=287, offs=52)
*/
ATSglobaldec()
ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effcst (ats_ptr_type arg0) {
/* local vardec */
// ATSlocal_void (tmp70) ;
ATSlocal (ats_ptr_type, tmp71) ;
ATSlocal (ats_ptr_type, tmp72) ;
// ATSlocal_void (tmp73) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effcst:
tmp71 = atspre_stderr_get () ;
tmp72 = ats_selsin_mac(tmp71, atslab_1) ;
/* tmp73 = */ ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__fprint_effcst (tmp72, arg0) ;
/* tmp70 = */ atspre_stderr_view_set () ;
return /* (tmp70) */ ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__prerr_effcst] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7461(line=291, offs=26) -- 7604(line=296, offs=4)
*/
ATSglobaldec()
ats_bool_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain (ats_ptr_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_bool_type, tmp74) ;
ATSlocal (ats_uint_type, tmp75) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain:
do {
/* branch: __ats_lab_7 */
__ats_lab_7_0:
if (((ats_sum_ptr_type)arg0)->tag != 0) { goto __ats_lab_8_0 ; }
__ats_lab_7_1:
tmp74 = ats_true_bool ;
break ;

/* branch: __ats_lab_8 */
__ats_lab_8_0:
if (((ats_sum_ptr_type)arg0)->tag != 1) { goto __ats_lab_9_0 ; }
__ats_lab_8_1:
tmp74 = ats_false_bool ;
break ;

/* branch: __ats_lab_9 */
__ats_lab_9_0:
// if (((ats_sum_ptr_type)arg0)->tag != 2) { ats_deadcode_failure_handle () ; }
__ats_lab_9_1:
tmp75 = ats_caselptrlab_mac(anairiats_sum_4, arg0, atslab_0) ;
tmp74 = atsopt_effset_contain (tmp75, arg1) ;
break ;
} while (0) ;
return (tmp74) ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7662(line=298, offs=30) -- 7696(line=298, offs=64)
*/
ATSglobaldec()
ats_bool_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain_ntm (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp76) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain_ntm:
tmp76 = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain (arg0, 2) ;
return (tmp76) ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effcst_contain_ntm] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7722(line=302, offs=4) -- 7767(line=302, offs=49)
*/
ATSstaticdec()
ats_bool_type
name_is_emp_18 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp77) ;

__ats_lab_name_is_emp_18:
tmp77 = atspre_eq_string_string (arg0, ATSstrcst("0")) ;
return (tmp77) ;
} /* end of [name_is_emp_18] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7772(line=304, offs=4) -- 7817(line=304, offs=49)
*/
ATSstaticdec()
ats_bool_type
name_is_all_19 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp78) ;

__ats_lab_name_is_all_19:
tmp78 = atspre_eq_string_string (arg0, ATSstrcst("1")) ;
return (tmp78) ;
} /* end of [name_is_all_19] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7822(line=306, offs=4) -- 7908(line=307, offs=52)
*/
ATSstaticdec()
ats_bool_type
name_is_exn_20 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp79) ;
ATSlocal (ats_bool_type, tmp80) ;

__ats_lab_name_is_exn_20:
tmp80 = atspre_eq_string_string (arg0, ATSstrcst("exn")) ;
if (tmp80) {
tmp79 = ats_true_bool ;
} else {
tmp79 = atspre_eq_string_string (arg0, ATSstrcst("exception")) ;
} /* end of [if] */
return (tmp79) ;
} /* end of [name_is_exn_20] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7913(line=309, offs=4) -- 7966(line=309, offs=57)
*/
ATSstaticdec()
ats_bool_type
name_is_exnref_21 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp81) ;

__ats_lab_name_is_exnref_21:
tmp81 = atspre_eq_string_string (arg0, ATSstrcst("exnref")) ;
return (tmp81) ;
} /* end of [name_is_exnref_21] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 7971(line=311, offs=4) -- 8055(line=312, offs=50)
*/
ATSstaticdec()
ats_bool_type
name_is_ntm_22 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp82) ;
ATSlocal (ats_bool_type, tmp83) ;

__ats_lab_name_is_ntm_22:
tmp83 = atspre_eq_string_string (arg0, ATSstrcst("ntm")) ;
if (tmp83) {
tmp82 = ats_true_bool ;
} else {
tmp82 = atspre_eq_string_string (arg0, ATSstrcst("nonterm")) ;
} /* end of [if] */
return (tmp82) ;
} /* end of [name_is_ntm_22] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 8060(line=314, offs=4) -- 8145(line=315, offs=52)
*/
ATSstaticdec()
ats_bool_type
name_is_ref_23 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp84) ;
ATSlocal (ats_bool_type, tmp85) ;

__ats_lab_name_is_ref_23:
tmp85 = atspre_eq_string_string (arg0, ATSstrcst("ref")) ;
if (tmp85) {
tmp84 = ats_true_bool ;
} else {
tmp84 = atspre_eq_string_string (arg0, ATSstrcst("reference")) ;
} /* end of [if] */
return (tmp84) ;
} /* end of [name_is_ref_23] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 8150(line=317, offs=4) -- 8199(line=317, offs=53)
*/
ATSstaticdec()
ats_bool_type
name_is_term_24 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp86) ;

__ats_lab_name_is_term_24:
tmp86 = atspre_eq_string_string (arg0, ATSstrcst("term")) ;
return (tmp86) ;
} /* end of [name_is_term_24] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 8335(line=327, offs=4) -- 8383(line=327, offs=52)
*/
ATSstaticdec()
ats_bool_type
name_is_lazy_25 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_bool_type, tmp87) ;

__ats_lab_name_is_lazy_25:
tmp87 = atspre_eq_string_string (arg0, ATSstrcst("laz")) ;
return (tmp87) ;
} /* end of [name_is_lazy_25] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 8416(line=333, offs=4) -- 8620(line=338, offs=4)
*/
ATSstaticdec()
ats_void_type
loop_err_26 (ats_ptr_type arg0, ats_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp88) ;
// ATSlocal_void (tmp89) ;
// ATSlocal_void (tmp90) ;
// ATSlocal_void (tmp91) ;
// ATSlocal_void (tmp92) ;
// ATSlocal_void (tmp93) ;
// ATSlocal_void (tmp94) ;

__ats_lab_loop_err_26:
/* tmp89 = */ ATS_2d0_2e2_2e12_2src_2ats_location_2esats__prerr_location (arg0) ;
/* tmp90 = */ atspre_prerr_string (ATSstrcst(": error(1)")) ;
/* tmp91 = */ atspre_prerr_string (ATSstrcst(": unrecognized effect constant: [")) ;
/* tmp92 = */ atspre_prerr_string (arg1) ;
/* tmp93 = */ atspre_prerr_string (ATSstrcst("]")) ;
/* tmp94 = */ atspre_prerr_newline () ;
/* tmp88 = */ ATS_2d0_2e2_2e12_2src_2ats_error_2esats__abort () ;
return /* (tmp88) */ ;
} /* end of [loop_err_26] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 8647(line=340, offs=5) -- 12133(line=441, offs=4)
*/
ATSstaticdec()
ats_void_type
loop_27 (ats_ref_type arg0, ats_ref_type arg1, ats_ref_type arg2, ats_ref_type arg3, ats_ref_type arg4, ats_ptr_type arg5) {
/* local vardec */
// ATSlocal_void (tmp95) ;
ATSlocal (ats_ptr_type, tmp96) ;
ATSlocal (ats_ptr_type, tmp97) ;
// ATSlocal_void (tmp98) ;
ATSlocal (ats_ptr_type, tmp99) ;
ATSlocal (ats_ptr_type, tmp100) ;
ATSlocal (ats_ptr_type, tmp101) ;
ATSlocal (ats_int_type, tmp102) ;
ATSlocal (ats_ptr_type, tmp103) ;
ATSlocal (ats_bool_type, tmp104) ;
ATSlocal (ats_bool_type, tmp105) ;
ATSlocal (ats_int_type, tmp106) ;
ATSlocal (ats_ptr_type, tmp107) ;
ATSlocal (ats_bool_type, tmp108) ;
ATSlocal (ats_bool_type, tmp109) ;
ATSlocal (ats_int_type, tmp110) ;
ATSlocal (ats_ptr_type, tmp111) ;
ATSlocal (ats_bool_type, tmp112) ;
ATSlocal (ats_bool_type, tmp113) ;
ATSlocal (ats_uint_type, tmp114) ;
ATSlocal (ats_uint_type, tmp115) ;
ATSlocal (ats_int_type, tmp116) ;
ATSlocal (ats_ptr_type, tmp117) ;
ATSlocal (ats_bool_type, tmp118) ;
ATSlocal (ats_bool_type, tmp119) ;
ATSlocal (ats_uint_type, tmp120) ;
ATSlocal (ats_uint_type, tmp121) ;
ATSlocal (ats_bool_type, tmp122) ;
ATSlocal (ats_bool_type, tmp123) ;
ATSlocal (ats_uint_type, tmp124) ;
ATSlocal (ats_uint_type, tmp125) ;
ATSlocal (ats_uint_type, tmp126) ;
ATSlocal (ats_uint_type, tmp127) ;
ATSlocal (ats_bool_type, tmp128) ;
ATSlocal (ats_bool_type, tmp129) ;
ATSlocal (ats_uint_type, tmp130) ;
ATSlocal (ats_uint_type, tmp131) ;
ATSlocal (ats_bool_type, tmp132) ;
ATSlocal (ats_bool_type, tmp133) ;
ATSlocal (ats_uint_type, tmp134) ;
ATSlocal (ats_uint_type, tmp135) ;
ATSlocal (ats_bool_type, tmp136) ;
ATSlocal (ats_bool_type, tmp137) ;
ATSlocal (ats_uint_type, tmp138) ;
ATSlocal (ats_uint_type, tmp139) ;
ATSlocal (ats_ptr_type, tmp140) ;
ATSlocal (ats_int_type, tmp141) ;
ATSlocal (ats_bool_type, tmp142) ;
ATSlocal (ats_int_type, tmp143) ;
ATSlocal (ats_int_type, tmp144) ;
ATSlocal (ats_bool_type, tmp146) ;
ATSlocal (ats_ptr_type, tmp147) ;
ATSlocal (ats_ptr_type, tmp148) ;
ATSlocal (ats_bool_type, tmp149) ;
ATSlocal (ats_int_type, tmp150) ;
ATSlocal (ats_int_type, tmp151) ;
ATSlocal (ats_int_type, tmp152) ;
ATSlocal (ats_bool_type, tmp154) ;
ATSlocal (ats_ptr_type, tmp155) ;
ATSlocal (ats_ptr_type, tmp156) ;
ATSlocal (ats_bool_type, tmp157) ;

__ats_lab_loop_27:
do {
/* branch: __ats_lab_10 */
__ats_lab_10_0:
if (arg5 == (ats_sum_ptr_type)0) { goto __ats_lab_26_0 ; }
__ats_lab_10_1:
tmp96 = ats_caselptrlab_mac(anairiats_sum_3, arg5, atslab_0) ;
tmp97 = ats_caselptrlab_mac(anairiats_sum_3, arg5, atslab_1) ;
tmp99 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_5, tmp96), atslab_e0fftag_node) ;
do {
/* branch: __ats_lab_11 */
__ats_lab_11_0:
if (((ats_sum_ptr_type)tmp99)->tag != 1) { goto __ats_lab_12_0 ; }
__ats_lab_11_1:
tmp100 = ats_caselptrlab_mac(anairiats_sum_2, tmp99, atslab_0) ;
tmp101 = ATS_MALLOC(sizeof(anairiats_sum_3)) ;
ats_selptrset_mac(anairiats_sum_3, tmp101, atslab_0, tmp100) ;
ats_selptrset_mac(anairiats_sum_3, tmp101, atslab_1, ats_ptrget_mac(ats_ptr_type, arg4)) ;
ats_ptrget_mac(ats_ptr_type, arg4) = tmp101 ;
break ;

/* branch: __ats_lab_12 */
__ats_lab_12_0:
if (((ats_sum_ptr_type)tmp99)->tag != 0) { goto __ats_lab_13_0 ; }
__ats_lab_12_1:
tmp102 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_0) ;
tmp103 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_1) ;
tmp104 = name_is_all_19 (tmp103) ;
if (!tmp104) { goto __ats_lab_13_1 ; }
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
tmp105 = atspre_gt_int_int (tmp102, 0) ;
if (tmp105) {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil ;
} else {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all ;
} /* end of [if] */
break ;

/* branch: __ats_lab_13 */
__ats_lab_13_0:
if (((ats_sum_ptr_type)tmp99)->tag != 0) { goto __ats_lab_14_0 ; }
__ats_lab_13_1:
tmp106 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_0) ;
tmp107 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_1) ;
tmp108 = name_is_emp_18 (tmp107) ;
if (!tmp108) { goto __ats_lab_14_1 ; }
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
tmp109 = atspre_gt_int_int (tmp106, 0) ;
if (tmp109) {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all ;
} else {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil ;
} /* end of [if] */
break ;

/* branch: __ats_lab_14 */
__ats_lab_14_0:
if (((ats_sum_ptr_type)tmp99)->tag != 0) { goto __ats_lab_15_0 ; }
__ats_lab_14_1:
tmp110 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_0) ;
tmp111 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_1) ;
tmp112 = name_is_lazy_25 (tmp111) ;
if (!tmp112) { goto __ats_lab_15_1 ; }
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
tmp113 = atspre_gt_int_int (tmp110, 0) ;
if (tmp113) {
tmp114 = atsopt_effset_add (ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil, 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp114 ;
} else {
tmp115 = atsopt_effset_del (ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all, 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp115 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_15 */
__ats_lab_15_0:
if (((ats_sum_ptr_type)tmp99)->tag != 0) { goto __ats_lab_22_0 ; }
__ats_lab_15_1:
tmp116 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_0) ;
tmp117 = ats_caselptrlab_mac(anairiats_sum_6, tmp99, atslab_1) ;
do {
/* branch: __ats_lab_16 */
__ats_lab_16_0:
__ats_lab_16_1:
tmp118 = name_is_exn_20 (tmp117) ;
if (!tmp118) { goto __ats_lab_17_1 ; }
tmp119 = atspre_gt_int_int (tmp116, 0) ;
if (tmp119) {
tmp120 = atsopt_effset_del (ats_ptrget_mac(ats_uint_type, arg3), 1) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp120 ;
} else {
tmp121 = atsopt_effset_add (ats_ptrget_mac(ats_uint_type, arg3), 1) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp121 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_17 */
__ats_lab_17_0:
__ats_lab_17_1:
tmp122 = name_is_exnref_21 (tmp117) ;
if (!tmp122) { goto __ats_lab_18_1 ; }
tmp123 = atspre_gt_int_int (tmp116, 0) ;
if (tmp123) {
tmp125 = atsopt_effset_del (ats_ptrget_mac(ats_uint_type, arg3), 1) ;
tmp124 = atsopt_effset_del (tmp125, 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp124 ;
} else {
tmp127 = atsopt_effset_add (ats_ptrget_mac(ats_uint_type, arg3), 1) ;
tmp126 = atsopt_effset_add (tmp127, 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp126 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_18 */
__ats_lab_18_0:
__ats_lab_18_1:
tmp128 = name_is_ntm_22 (tmp117) ;
if (!tmp128) { goto __ats_lab_19_1 ; }
tmp129 = atspre_gt_int_int (tmp116, 0) ;
if (tmp129) {
tmp130 = atsopt_effset_del (ats_ptrget_mac(ats_uint_type, arg3), 2) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp130 ;
} else {
tmp131 = atsopt_effset_add (ats_ptrget_mac(ats_uint_type, arg3), 2) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp131 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_19 */
__ats_lab_19_0:
__ats_lab_19_1:
tmp132 = name_is_term_24 (tmp117) ;
if (!tmp132) { goto __ats_lab_20_1 ; }
tmp133 = atspre_gt_int_int (tmp116, 0) ;
if (tmp133) {
tmp134 = atsopt_effset_add (ats_ptrget_mac(ats_uint_type, arg3), 2) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp134 ;
} else {
tmp135 = atsopt_effset_del (ats_ptrget_mac(ats_uint_type, arg3), 2) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp135 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_20 */
__ats_lab_20_0:
__ats_lab_20_1:
tmp136 = name_is_ref_23 (tmp117) ;
if (!tmp136) { goto __ats_lab_21_1 ; }
tmp137 = atspre_gt_int_int (tmp116, 0) ;
if (tmp137) {
tmp138 = atsopt_effset_del (ats_ptrget_mac(ats_uint_type, arg3), 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp138 ;
} else {
tmp139 = atsopt_effset_add (ats_ptrget_mac(ats_uint_type, arg3), 3) ;
ats_ptrget_mac(ats_uint_type, arg3) = tmp139 ;
} /* end of [if] */
break ;

/* branch: __ats_lab_21 */
__ats_lab_21_0:
__ats_lab_21_1:
tmp140 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_5, tmp96), atslab_e0fftag_loc) ;
/* tmp98 = */ loop_err_26 (tmp140, tmp117) ;
break ;
} while (0) ;
break ;

/* branch: __ats_lab_22 */
__ats_lab_22_0:
if (((ats_sum_ptr_type)tmp99)->tag != 2) { goto __ats_lab_23_0 ; }
__ats_lab_22_1:
ats_ptrget_mac(ats_int_type, arg2) = 1 ;
break ;

/* branch: __ats_lab_23 */
__ats_lab_23_0:
if (((ats_sum_ptr_type)tmp99)->tag != 3) { goto __ats_lab_24_0 ; }
__ats_lab_23_1:
tmp141 = ats_caselptrlab_mac(anairiats_sum_7, tmp99, atslab_0) ;
ats_ptrget_mac(ats_int_type, arg1) = 1 ;
tmp142 = atspre_gt_int_int (tmp141, 0) ;
if (tmp142) {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all ;
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_24 */
__ats_lab_24_0:
if (((ats_sum_ptr_type)tmp99)->tag != 4) { goto __ats_lab_25_0 ; }
__ats_lab_24_1:
tmp143 = ats_caselptrlab_mac(anairiats_sum_8, tmp99, atslab_0) ;
tmp144 = ats_caselptrlab_mac(anairiats_sum_8, tmp99, atslab_1) ;
tmp146 = atspre_gte_int_int (tmp143, 0) ;
if (tmp146) {
ats_ptrget_mac(ats_int_type, arg1) = tmp143 ;
} else {
/* empty */
} /* end of [if] */
tmp148 = (ats_sum_ptr_type)0 ;
tmp147 = ATS_MALLOC(sizeof(anairiats_sum_9)) ;
ats_selptrset_mac(anairiats_sum_9, tmp147, atslab_0, tmp148) ;
ats_ptrget_mac(ats_ptr_type, arg0) = tmp147 ;
tmp149 = atspre_gt_int_int (tmp144, 0) ;
if (tmp149) {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all ;
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_25 */
__ats_lab_25_0:
// if (((ats_sum_ptr_type)tmp99)->tag != 5) { ats_deadcode_failure_handle () ; }
__ats_lab_25_1:
tmp150 = ats_caselptrlab_mac(anairiats_sum_10, tmp99, atslab_0) ;
tmp151 = ats_caselptrlab_mac(anairiats_sum_10, tmp99, atslab_1) ;
tmp152 = ats_caselptrlab_mac(anairiats_sum_10, tmp99, atslab_2) ;
tmp154 = atspre_gte_int_int (tmp150, 0) ;
if (tmp154) {
ats_ptrget_mac(ats_int_type, arg1) = tmp150 ;
} else {
/* empty */
} /* end of [if] */
tmp156 = ATS_MALLOC(sizeof(anairiats_sum_11)) ;
ats_selptrset_mac(anairiats_sum_11, tmp156, atslab_0, tmp151) ;
tmp155 = ATS_MALLOC(sizeof(anairiats_sum_9)) ;
ats_selptrset_mac(anairiats_sum_9, tmp155, atslab_0, tmp156) ;
ats_ptrget_mac(ats_ptr_type, arg0) = tmp155 ;
tmp157 = atspre_gt_int_int (tmp152, 0) ;
if (tmp157) {
ats_ptrget_mac(ats_uint_type, arg3) = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all ;
ats_ptrget_mac(ats_ptr_type, arg4) = statmp50 ;
} else {
/* empty */
} /* end of [if] */
break ;
} while (0) ;
arg0 = arg0 ;
arg1 = arg1 ;
arg2 = arg2 ;
arg3 = arg3 ;
arg4 = arg4 ;
arg5 = tmp97 ;
goto __ats_lab_loop_27 ; // tail call
break ;

/* branch: __ats_lab_26 */
__ats_lab_26_0:
// if (arg5 != (ats_sum_ptr_type)0) { ats_deadcode_failure_handle () ; }
__ats_lab_26_1:
break ;
} while (0) ;
return /* (tmp95) */ ;
} /* end of [loop_27] */

/*
// /home/hwxi/Research/ATS-Anairiats/src/ats_effect.dats: 12197(line=446, offs=15) -- 12713(line=460, offs=4)
*/
ATSglobaldec()
anairiats_rec_12
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__e0fftaglst_tr (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (anairiats_rec_12, tmp158) ;
ATSlocal (ats_ptr_type, tmp159) ;
ATSlocal (ats_int_type, tmp160) ;
ATSlocal (ats_int_type, tmp161) ;
ATSlocal (ats_uint_type, tmp162) ;
ATSlocal (ats_ptr_type, tmp163) ;
// ATSlocal_void (tmp164) ;
ATSlocal (ats_ptr_type, tmp165) ;
ATSlocal (ats_bool_type, tmp166) ;
ATSlocal (ats_bool_type, tmp167) ;

__ats_lab_ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__e0fftaglst_tr:
/* ats_ptr_type tmp159 ; */
tmp159 = (ats_sum_ptr_type)0 ;
/* ats_int_type tmp160 ; */
tmp160 = 0 ;
/* ats_int_type tmp161 ; */
tmp161 = 0 ;
/* ats_uint_type tmp162 ; */
tmp162 = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil ;
/* ats_ptr_type tmp163 ; */
tmp163 = statmp50 ;
/* tmp164 = */ loop_27 ((&tmp159), (&tmp160), (&tmp161), (&tmp162), (&tmp163), arg0) ;
do {
/* branch: __ats_lab_27 */
__ats_lab_27_0:
__ats_lab_27_1:
tmp166 = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset (tmp162, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all) ;
if (!tmp166) { goto __ats_lab_28_1 ; }
tmp165 = (ats_sum_ptr_type)(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__EFFCSTall_0) ;
break ;

/* branch: __ats_lab_28 */
__ats_lab_28_0:
__ats_lab_28_1:
tmp167 = ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__eq_effset_effset (tmp162, ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil) ;
if (!tmp167) { goto __ats_lab_31_1 ; }
do {
/* branch: __ats_lab_29 */
__ats_lab_29_0:
if (tmp163 != (ats_sum_ptr_type)0) { goto __ats_lab_30_0 ; }
__ats_lab_29_1:
tmp165 = (ats_sum_ptr_type)(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__EFFCSTnil_1) ;
break ;

/* branch: __ats_lab_30 */
__ats_lab_30_0:
__ats_lab_30_1:
tmp165 = ATS_MALLOC(sizeof(anairiats_sum_4)) ;
((ats_sum_ptr_type)tmp165)->tag = 2 ;
ats_selptrset_mac(anairiats_sum_4, tmp165, atslab_0, tmp162) ;
ats_selptrset_mac(anairiats_sum_4, tmp165, atslab_1, tmp163) ;
break ;
} while (0) ;
break ;

/* branch: __ats_lab_31 */
__ats_lab_31_0:
__ats_lab_31_1:
tmp165 = ATS_MALLOC(sizeof(anairiats_sum_4)) ;
((ats_sum_ptr_type)tmp165)->tag = 2 ;
ats_selptrset_mac(anairiats_sum_4, tmp165, atslab_0, tmp162) ;
ats_selptrset_mac(anairiats_sum_4, tmp165, atslab_1, tmp163) ;
break ;
} while (0) ;
tmp158.atslab_0 = tmp159 ;
tmp158.atslab_1 = tmp160 ;
tmp158.atslab_2 = tmp161 ;
tmp158.atslab_3 = tmp165 ;

return (tmp158) ;
} /* end of [ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__e0fftaglst_tr] */

/* static load function */

extern ats_void_type ATS_2d0_2e2_2e12_2src_2ats_error_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2src_2ats_location_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__staload (void) ;

ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__staload () {
static int ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__staload_flag = 0 ;
if (ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__staload_flag) return ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__staload_flag = 1 ;

ATS_2d0_2e2_2e12_2src_2ats_error_2esats__staload () ;
ATS_2d0_2e2_2e12_2src_2ats_location_2esats__staload () ;
ATS_2d0_2e2_2e12_2src_2ats_syntax_2esats__staload () ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__staload () ;

return ;
} /* staload function */

/* dynamic load function */

// dynload flag declaration
extern ats_int_type ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__dynload_flag ;

ats_void_type
ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__dynload () {
ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__dynload_flag = 1 ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2edats__staload () ;

#ifdef _ATS_PROOFCHECK
ATS_2d0_2e2_2e12_2prelude_2basics_dyn_2esats__file_mode_lte_w_w_prfck () ;
#endif /* _ATS_PROOFCHECK */

/* marking static variables for GC */
ATS_GC_MARKROOT(&statmp0, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp1, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp2, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp26, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp27, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp50, sizeof(ats_ptr_type)) ;

/* marking external values for GC */

/* code for dynamic loading */
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_exn, sizeof(ats_int_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_exn = 1 ;
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ntm, sizeof(ats_int_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ntm = 2 ;
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ref, sizeof(ats_int_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effect_ref = 3 ;
statmp0 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, statmp0, atslab_0, 1) ;
statmp1 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, statmp0), atslab_1) ;
statmp2 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, statmp2, atslab_0, 2) ;
ats_ptrget_mac(ats_ptr_type, statmp1) = statmp2 ;
statmp1 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, statmp2), atslab_1) ;
statmp2 = ATS_MALLOC(sizeof(anairiats_sum_0)) ;
ats_selptrset_mac(anairiats_sum_0, statmp2, atslab_0, 3) ;
ats_ptrget_mac(ats_ptr_type, statmp1) = statmp2 ;
statmp1 = &ats_selptr_mac(ats_castptr_mac(anairiats_sum_0, statmp2), atslab_1) ;
statmp2 = (ats_sum_ptr_type)0 ;
ats_ptrget_mac(ats_ptr_type, statmp1) = statmp2 ;
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effectlst_all, sizeof(ats_ptr_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effectlst_all = statmp0 ;
statmp27 = atspre_asl_int_int1 (1, 4) ;
statmp26 = atspre_sub_int_int (statmp27, 1) ;
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all, sizeof(ats_uint_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_all = ats_castfn_mac(ats_uint_type, statmp26) ;
ATS_GC_MARKROOT(&ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil, sizeof(ats_uint_type)) ;
ATS_2d0_2e2_2e12_2src_2ats_effect_2esats__effset_nil = ats_castfn_mac(ats_uint_type, 0) ;
statmp50 = (ats_sum_ptr_type)0 ;
return ;
} /* end of [dynload function] */

/* external codes at mid */


#define MAX_EFFECT_NUMBER 4

#ifdef __WORDSIZE

#if (MAX_EFFECT_NUMBER > __WORDSIZE)
#error "MAX_EFFECT_NUMBER is too large!"
#endif

#endif

ats_void_type
atsopt_fprint_effset (
  ats_ptr_type out, atsopt_effset_t effs
) {
  int i, n ;
  i = 1 ; n = 0 ;
  while (i <= MAX_EFFECT_NUMBER) {
    if (effs & 0x1) {
      if (n > 0) fprintf ((FILE *)out, ",");
      atsopt_fprint_effect (out, i) ; ++n ;
    }
    ++i ; effs >>= 1 ;
  }
  return ;
} /* end of [atsopt_fprint_effset] */



atsopt_effset_t
atsopt_effset_add (
  atsopt_effset_t efs, atsopt_effect_t eff
) {
  unsigned int i = 1 ;
  while (eff > 1) { i <<= 1; --eff ; }
  return (efs | i) ;
} // end of [atsopt_effset_add]

atsopt_effset_t
atsopt_effset_del (
  atsopt_effset_t efs, atsopt_effect_t eff
) {
  unsigned int i = 1 ;
  while (eff > 1) { i <<= 1; --eff ; }
  return (efs & ~i) ;
} // end of [atsopt_effset_del]

ats_bool_type
atsopt_effset_contain (
  atsopt_effset_t efs, atsopt_effect_t eff
) {
  unsigned int i = 1 ;
  while (eff > 1) { i <<= 1; --eff ; }
  return (efs & i ? ats_true_bool : ats_false_bool) ;
} // end of [atsopt_effset_contain]

atsopt_effset_t
atsopt_effset_union (
  atsopt_effset_t efs1, atsopt_effset_t efs2
) {
  return (efs1 | efs2) ;
} // end of [atsopt_effset_union]

ats_bool_type
atsopt_effset_subset (
  atsopt_effset_t efs1, atsopt_effset_t efs2
) {
  return (efs1 & ~efs2 ? ats_false_bool : ats_true_bool) ;
} // end of [atsopt_effset_subset]


/* external codes at bot */

/* ****** ****** */

/* end of [/home/hwxi/Research/ATS-Anairiats/bootstrap1/ats_effect_dats.c] */

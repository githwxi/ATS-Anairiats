/*
**
** The C code is generated by ATS/Anairiats
** The compilation time is: 2018-1-26: 18h:25m
**
*/

/* include some .h files */
#ifndef _ATS_HEADER_NONE
#include "ats_config.h"
#include "ats_basics.h"
#include "ats_types.h"
#include "ats_exception.h"
#include "ats_memory.h"
#endif /* _ATS_HEADER_NONE */

/* include some .cats files */
#ifndef _ATS_PRELUDE_NONE
#include "prelude/CATS/basics.cats"
#include "prelude/CATS/integer.cats"
#include "prelude/CATS/sizetype.cats"
#include "prelude/CATS/integer_ptr.cats"
#include "prelude/CATS/integer_fixed.cats"
#include "prelude/CATS/pointer.cats"
#include "prelude/CATS/bool.cats"
#include "prelude/CATS/char.cats"
#include "prelude/CATS/byte.cats"
#include "prelude/CATS/float.cats"
#include "prelude/CATS/string.cats"
#include "prelude/CATS/reference.cats"
#include "prelude/CATS/lazy.cats"
#include "prelude/CATS/lazy_vt.cats"
#include "prelude/CATS/printf.cats"
#include "prelude/CATS/list.cats"
#include "prelude/CATS/option.cats"
#include "prelude/CATS/array.cats"
#include "prelude/CATS/matrix.cats"
#endif /* _ATS_PRELUDE_NONE */
/* prologues from statically loaded files */

#include "libc/CATS/random.cats"

#include "libc/CATS/stdio.cats"

#include "libc/sys/CATS/types.cats"

#include "libc/CATS/unistd.cats"

#include "libc/sys/CATS/types.cats"

#include "libc/CATS/fcntl.cats"

#include "libc/sys/CATS/types.cats"
/* external codes at top */

ats_int_type
natrand48 (
  ats_int_type range
) {
  return (range * atslib_drand48 ()) ;
} // end of [natrand48]

/* type definitions */
typedef
struct {
ats_ptr_type atslab_3 ;
ats_ptr_type atslab_4 ;
} anairiats_rec_0 ;

typedef
struct {
ats_ptr_type atslab_2 ;
ats_size_type atslab_3 ;
} anairiats_rec_1 ;

typedef
struct {
ats_int_type atslab_row ;
ats_int_type atslab_col ;
ats_ptr_type atslab_mat ;
} anairiats_rec_2 ;

typedef
struct {
ats_int_type atslab_0 ;
ats_int_type atslab_1 ;
} anairiats_rec_3 ;

typedef
struct {
ats_int_type atslab_rot ;
ats_int_type atslab_xlen ;
ats_int_type atslab_ylen ;
ats_int_type atslab_xpos ;
ats_int_type atslab_ypos ;
ats_int_type atslab_speed_lim ;
ats_int_type atslab_speed_acc ;
ats_ptr_type atslab_shape ;
} anairiats_rec_4 ;

/* external typedefs */
/* external dynamic constructor declarations */
ATSextern_val(ats_exn_type, ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException) ;

/* external dynamic constant declarations */
ATSextern_fun(ats_void_type, atspre_cloptr_free) (ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_vbox_make_view_ptr) (ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, atspre_stdin_get) () ;
ATSextern_fun(ats_void_type, atspre_stdin_view_set) () ;
ATSextern_fun(ats_void_type, atspre_print_newline) () ;
ATSextern_fun(ats_bool_type, atspre_neg_bool) (ats_bool_type) ;
ATSextern_fun(ats_char_type, atspre_char_of_int) (ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_eq_char_char) (ats_char_type, ats_char_type) ;
ATSextern_fun(ats_bool_type, atspre_neq_char_char) (ats_char_type, ats_char_type) ;
ATSextern_fun(ats_void_type, atspre_print_char) (ats_char_type) ;
ATSextern_fun(ats_int_type, atspre_int_of_char) (ats_char_type) ;
ATSextern_fun(ats_bool_type, atspre_lt_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_neq_int_int) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_void_type, atspre_print_int) (ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_ineg) (ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_iadd) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_isub) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_imul) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_nmod) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_ilt) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_ilte) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_igt) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_igte) (ats_int_type, ats_int_type) ;
ATSextern_fun(ats_int_type, atspre_nhalf) (ats_int_type) ;
ATSextern_fun(ats_size_type, atspre_size1_of_int1) (ats_int_type) ;
ATSextern_fun(ats_size_type, atspre_add_size1_int1) (ats_size_type, ats_int_type) ;
ATSextern_fun(ats_size_type, atspre_sub_size1_int1) (ats_size_type, ats_int_type) ;
ATSextern_fun(ats_size_type, atspre_mul2_size1_size1) (ats_size_type, ats_size_type) ;
ATSextern_fun(ats_size_type, atspre_mod1_size1_size1) (ats_size_type, ats_size_type) ;
ATSextern_fun(ats_bool_type, atspre_lt_size1_size1) (ats_size_type, ats_size_type) ;
ATSextern_fun(ats_bool_type, atspre_gt_size1_int1) (ats_size_type, ats_int_type) ;
ATSextern_fun(ats_bool_type, atspre_neq_size1_size1) (ats_size_type, ats_size_type) ;
ATSextern_fun(ats_ptr_type, atspre_ptr_alloc_tsz) (ats_size_type) ;
ATSextern_fun(ats_void_type, atspre_ptr_free) (ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, atspre_ref_make_elt_tsz) (ats_ref_type, ats_size_type) ;
ATSextern_fun(ats_void_type, atspre_print_string) (ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, atspre_array_ptr_alloc_tsz) (ats_size_type, ats_size_type) ;
ATSextern_fun(ats_void_type, atspre_array_ptr_free) (ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_array_ptr_initialize_funenv_tsz) (ats_ref_type, ats_size_type, ats_ptr_type, ats_size_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_array_ptr_initialize_cloenv_tsz) (ats_ref_type, ats_size_type, ats_ref_type, ats_size_type, ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, atspre_array_ptr_split_tsz) (ats_ptr_type, ats_size_type, ats_size_type) ;
ATSextern_fun(ats_ptr_type, atspre_array_ptr_takeout_tsz) (ats_ptr_type, ats_size_type, ats_size_type) ;
ATSextern_fun(anairiats_rec_0, atspre_array_ptr_takeout2_tsz) (ats_ptr_type, ats_size_type, ats_size_type, ats_size_type) ;
ATSextern_fun(ats_void_type, atspre_array_ptr_foreach_funenv_tsz) (ats_ref_type, ats_ptr_type, ats_size_type, ats_size_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, atspre_array_ptr_iforeach_funenv_tsz) (ats_ref_type, ats_ptr_type, ats_size_type, ats_size_type, ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, atspre_array2_ptr_takeout_tsz) (ats_ptr_type, ats_size_type, ats_size_type, ats_size_type) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2prelude_2SATS_2array_2esats__array_make_arrpsz) (anairiats_rec_1) ;
ATSextern_fun(ats_ptr_type, atspre_matrix_ptr_takeout_row_tsz) (ats_ptr_type, ats_size_type, ats_size_type, ats_size_type) ;
ATSextern_fun(ats_ptr_type, atspre_matrix_ptr_takeout_elt_tsz) (ats_ptr_type, ats_size_type, ats_size_type, ats_size_type, ats_size_type) ;
ATSextern_fun(ats_ptr_type, atspre_matrix_make_arrpsz__main) (ats_size_type, ats_size_type, anairiats_rec_1) ;
ATSextern_fun(ats_ptr_type, atspre_matrix_make_funenv_tsz) (ats_size_type, ats_size_type, ats_ptr_type, ats_size_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, atslib_srand48_with_time) () ;
ATSextern_fun(ats_void_type, atslib_fflush_stdout) () ;
ATSextern_fun(ats_void_type, atspre_vbox_make_view_ptr) (ats_ptr_type) ;
ATSextern_fun(ats_void_type, save_set_keyboard) () ;
ATSextern_fun(ats_void_type, restore_keyboard) () ;
ATSextern_fun(ats_bool_type, kbhit) () ;
ATSextern_fun(ats_int_type, readch) () ;
ATSextern_fun(ats_int_type, natrand48) (ats_int_type) ;

/* external dynamic terminating constant declarations */
#ifdef _ATS_PROOFCHECK
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2basics_dyn_2esats__file_mode_lte_r_r_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2arith_2esats__mul_istot_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2arith_2esats__mul_nat_nat_nat_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2array_2esats__array_v_takeout2_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2matrix_2esats__array_v_of_matrix_v_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2matrix_2esats__matrix_v_of_array_v_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____copy_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____free_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____assert_prfck () ;
extern
ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____assert_prfck () ;
#endif /* _ATS_PROOFCHECK */

/* assuming abstract types */
/* sum constructor declarations */
/* exn constructor declarations */
ATSglobal(ats_exn_type, ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException) ;

/* global dynamic (non-functional) constant declarations */
/* internal function declarations */
static
ats_void_type loop_2 (ats_ptr_type arg0, ats_size_type arg1, ats_char_type arg2) ;
static
ats_void_type array_ptr_initialize_elt_01568_ats_char_type (ats_ref_type arg0, ats_size_type arg1, ats_char_type arg2) ;
static
ats_ptr_type matrix_make_elt_01652_ats_char_type (ats_size_type arg0, ats_size_type arg1, ats_char_type arg2) ;
static
ats_ptr_type matrix_ptr_takeout_elt_01648_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3) ;
static
ats_char_type matrix_get_elt_at_01656_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3) ;
static
ats_char_type matrix_get_elt_at__intsz_01658_ats_char_type (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) ;
static
ats_char_type frame_get_at_3 (ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type matrix_set_elt_at_01657_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3, ats_char_type arg4) ;
static
ats_void_type matrix_set_elt_at__intsz_01659_ats_char_type (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3, ats_char_type arg4) ;
static
ats_void_type frame_set_at_7 (ats_int_type arg0, ats_int_type arg1, ats_char_type arg2) ;
static
ats_void_type curs_clear_10 () ;
static
ats_void_type curs_home_11 () ;
static
ats_void_type curs_invisible_12 () ;
static
ats_void_type curs_normal_13 () ;
static
ats_void_type curs_upward_14 (ats_int_type arg0) ;
static
ats_void_type curs_downward_15 (ats_int_type arg0) ;
static
ats_void_type curs_forward_16 (ats_int_type arg0) ;
static
ats_void_type curs_backward_17 (ats_int_type arg0) ;
static
ats_void_type curs_goto_18 (ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type print_vertical_line_up_19 (ats_int_type arg0) ;
static
ats_void_type print_vertical_line_dn_20 (ats_int_type arg0) ;
static
ats_void_type print_horizontal_line_21 (ats_int_type arg0) ;
static
ats_void_type print_frame_22 () ;
static
ats_void_type print_block_23 (ats_char_type arg0, ats_bool_type arg1) ;
static
ats_bool_type aux_25 (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_25_closure_make (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) ;
static
ats_bool_type aux_25_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_bool_type move_test_24 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) ;
static
ats_void_type aux_27 (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_27_closure_make (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) ;
static
ats_void_type aux_27_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type absorb_26 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) ;
static
ats_void_type loop_29 (ats_int_type env0, ats_int_type arg0, ats_clo_ptr_type arg1) ;
static
ats_clo_ptr_type loop_29_closure_make (ats_int_type env0) ;
static
ats_void_type loop_29_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_clo_ptr_type arg1) ;
static
ats_void_type iter_28 (ats_int_type arg0, ats_clo_ptr_type arg1) ;
static
ats_void_type __ats_fun_32 (ats_int_type env0, ats_int_type arg0) ;
static
ats_clo_ptr_type __ats_fun_32_closure_make (ats_int_type env0) ;
static
ats_void_type __ats_fun_32_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type __ats_fun_33 (ats_int_type arg0) ;
static
ats_clo_ptr_type __ats_fun_33_closure_make () ;
static
ats_void_type __ats_fun_33_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type aux_31 (ats_int_type env0, ats_int_type arg0) ;
static
ats_clo_ptr_type aux_31_closure_make (ats_int_type env0) ;
static
ats_void_type aux_31_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type frame_line_flash_30 (ats_int_type arg0) ;
static
ats_void_type aux1_35 (ats_int_type arg0) ;
static
ats_clo_ptr_type aux1_35_closure_make () ;
static
ats_void_type aux1_35_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type aux2_36 (ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux2_36_closure_make () ;
static
ats_void_type aux2_36_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type frame_display_34 () ;
static
ats_int_type aux1_38 (ats_int_type arg0) ;
static
ats_clo_ptr_type aux1_38_closure_make () ;
static
ats_int_type aux1_38_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_int_type aux2_39 (ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux2_39_closure_make () ;
static
ats_int_type aux2_39_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_int_type aux1_38_0aux2_39 (ats_int_type arg0, ...) ;
static
ats_clo_ptr_type aux1_38_0aux2_39_closure_make () ;
static
ats_int_type aux1_38_0aux2_39_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ...) ;
static
ats_int_type frame_find_37 () ;
static
ats_void_type print_usage_41 () ;
static
ats_ptr_type ref_01088_ats_int_type (ats_int_type arg0) ;
static
ats_ptr_type ref_make_elt_01089_ats_int_type (ats_int_type arg0) ;
static
ats_void_type total_number_of_filled_lines_inc_44 () ;
static
ats_void_type print_score_45 () ;
static
ats_void_type __ats_fun_48 (ats_int_type env0, ats_int_type env1, ats_int_type arg0) ;
static
ats_clo_ptr_type __ats_fun_48_closure_make (ats_int_type env0, ats_int_type env1) ;
static
ats_void_type __ats_fun_48_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type aux1_47 (ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux1_47_closure_make () ;
static
ats_void_type aux1_47_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type __ats_fun_50 (ats_int_type env0, ats_int_type arg0) ;
static
ats_clo_ptr_type __ats_fun_50_closure_make (ats_int_type env0) ;
static
ats_void_type __ats_fun_50_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type aux2_49 (ats_int_type arg0) ;
static
ats_clo_ptr_type aux2_49_closure_make () ;
static
ats_void_type aux2_49_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type aux3_51 (ats_int_type arg0) ;
static
ats_clo_ptr_type aux3_51_closure_make () ;
static
ats_void_type aux3_51_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) ;
static
ats_void_type frame_delete_46 () ;
static
ats_void_type aux_53 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_53_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) ;
static
ats_void_type aux_53_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type display_shape_0_52 (ats_ptr_type arg0, ats_bool_type arg1) ;
static
ats_void_type aux_55 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_55_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) ;
static
ats_void_type aux_55_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type display_shape_1_54 (ats_ptr_type arg0, ats_bool_type arg1) ;
static
ats_void_type aux_57 (ats_bool_type env0, ats_int_type env1, ats_ptr_type env2, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_57_closure_make (ats_bool_type env0, ats_int_type env1, ats_ptr_type env2) ;
static
ats_void_type aux_57_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type display_shape_2_56 (ats_ptr_type arg0, ats_bool_type arg1) ;
static
ats_void_type aux_59 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_59_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) ;
static
ats_void_type aux_59_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type display_shape_3_58 (ats_ptr_type arg0, ats_bool_type arg1) ;
static
ats_void_type display_shape_at_60 (ats_ptr_type arg0, ats_bool_type arg1, ats_int_type arg2, ats_int_type arg3, ats_int_type arg4) ;
static
ats_void_type shapeObj_display_61 (ats_ref_type arg0) ;
static
ats_void_type shapeObj_undisplay_62 (ats_ref_type arg0) ;
static
ats_int_type shapeObj_downward_63 (ats_ref_type arg0) ;
static
ats_void_type shapeObj_falling_64 (ats_ref_type arg0) ;
static
ats_ptr_type shape_make_65 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2) ;
static
ats_ptr_type shapeObj_make_66 (ats_ptr_type arg0) ;
static
ats_void_type aux_68 (ats_int_type env0, ats_int_type env1, ats_char_type env2, ats_int_type env3, ats_ptr_type env4, ats_int_type arg0, ats_int_type arg1) ;
static
ats_clo_ptr_type aux_68_closure_make (ats_int_type env0, ats_int_type env1, ats_char_type env2, ats_int_type env3, ats_ptr_type env4) ;
static
ats_void_type aux_68_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) ;
static
ats_void_type set_block_at_67 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_char_type arg3) ;
static
ats_ptr_type array_get_elt_at__intsz_01617_ats_ptr_type (ats_ptr_type arg0, ats_int_type arg1) ;
static
ats_ptr_type gen_shape_obj_69 () ;
static
ats_void_type loop_72 () ;
static
ats_void_type tetrix_71 () ;

/* partial value template declarations */
/* static temporary variable declarations */
ATSstatic (ats_ptr_type, statmp0) ;
ATSstatic (ats_size_type, statmp14) ;
ATSstatic (ats_int_type, statmp15) ;
ATSstatic (ats_size_type, statmp16) ;
ATSstatic (ats_ptr_type, statmp258) ;
ATSstatic (ats_int_type, statmp477) ;
ATSstatic (ats_int_type, statmp478) ;
ATSstatic (ats_ptr_type, statmp479) ;
ATSstatic (ats_size_type, statmp480) ;
ATSstatic (ats_size_type, statmp481) ;
ATSstatic (ats_ptr_type, statmp482) ;
ATSstatic (ats_int_type, statmp483) ;
ATSstatic (ats_ptr_type, statmp484) ;
ATSstatic (ats_size_type, statmp485) ;
ATSstatic (ats_size_type, statmp486) ;
ATSstatic (ats_ptr_type, statmp487) ;
ATSstatic (ats_int_type, statmp488) ;
ATSstatic (ats_int_type, statmp489) ;
ATSstatic (ats_ptr_type, statmp490) ;
ATSstatic (ats_size_type, statmp491) ;
ATSstatic (ats_size_type, statmp492) ;
ATSstatic (ats_ptr_type, statmp493) ;
// ATSstatic_void (statmp494) ;
// ATSstatic_void (statmp495) ;
ATSstatic (ats_int_type, statmp496) ;
ATSstatic (ats_int_type, statmp497) ;
ATSstatic (ats_ptr_type, statmp498) ;
ATSstatic (ats_size_type, statmp499) ;
ATSstatic (ats_size_type, statmp500) ;
ATSstatic (ats_ptr_type, statmp501) ;
// ATSstatic_void (statmp502) ;
// ATSstatic_void (statmp503) ;
ATSstatic (ats_int_type, statmp504) ;
ATSstatic (ats_int_type, statmp505) ;
ATSstatic (ats_ptr_type, statmp506) ;
ATSstatic (ats_size_type, statmp507) ;
ATSstatic (ats_size_type, statmp508) ;
ATSstatic (ats_ptr_type, statmp509) ;
// ATSstatic_void (statmp510) ;
// ATSstatic_void (statmp511) ;
ATSstatic (ats_int_type, statmp512) ;
ATSstatic (ats_int_type, statmp513) ;
ATSstatic (ats_ptr_type, statmp514) ;
ATSstatic (ats_size_type, statmp515) ;
ATSstatic (ats_size_type, statmp516) ;
ATSstatic (ats_ptr_type, statmp517) ;
// ATSstatic_void (statmp518) ;
// ATSstatic_void (statmp519) ;
ATSstatic (ats_int_type, statmp520) ;
ATSstatic (ats_int_type, statmp521) ;
ATSstatic (ats_ptr_type, statmp522) ;
ATSstatic (ats_size_type, statmp523) ;
ATSstatic (ats_size_type, statmp524) ;
ATSstatic (ats_ptr_type, statmp525) ;
// ATSstatic_void (statmp526) ;
// ATSstatic_void (statmp527) ;
ATSstatic (ats_ptr_type, statmp528) ;
ATSstatic (anairiats_rec_1, statmp529) ;
ATSstatic (ats_ptr_type, statmp530) ;

/* external value variable declarations */

/* function implementations */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/array.dats: 4282(line=152, offs=7) -- 4714(line=165, offs=8)
*/
ATSstaticdec()
ats_void_type
loop_2 (ats_ptr_type arg0, ats_size_type arg1, ats_char_type arg2) {
/* local vardec */
// ATSlocal_void (tmp8) ;
ATSlocal (ats_bool_type, tmp9) ;
ATSlocal (ats_ptr_type, tmp10) ;
ATSlocal (ats_size_type, tmp11) ;

__ats_lab_loop_2:
tmp9 = atspre_gt_size1_int1 (arg1, 0) ;
if (tmp9) {
ats_ptrget_mac(ats_char_type, arg0) = arg2 ;
tmp10 = atspre_padd_size (arg0, sizeof(ats_char_type)) ;
tmp11 = atspre_sub_size1_int1 (arg1, 1) ;
arg0 = tmp10 ;
arg1 = tmp11 ;
arg2 = arg2 ;
goto __ats_lab_loop_2 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp8) */ ;
} /* end of [loop_2] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/array.dats: 4202(line=148, offs=26) -- 4820(line=170, offs=4)
*/
ATSstaticdec()
ats_void_type
array_ptr_initialize_elt_01568_ats_char_type (ats_ref_type arg0, ats_size_type arg1, ats_char_type arg2) {
/* local vardec */
// ATSlocal_void (tmp7) ;

__ats_lab_array_ptr_initialize_elt_01568_ats_char_type:
/* tmp7 = */ loop_2 (arg0, arg1, arg2) ;
return /* (tmp7) */ ;
} /* end of [array_ptr_initialize_elt_01568_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 3777(line=144, offs=17) -- 4247(line=156, offs=6)
*/
ATSstaticdec()
ats_ptr_type
matrix_make_elt_01652_ats_char_type (ats_size_type arg0, ats_size_type arg1, ats_char_type arg2) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp1) ;
ATSlocal (ats_size_type, tmp2) ;
ATSlocal (ats_size_type, tmp3) ;
ATSlocal (ats_ptr_type, tmp4) ;
ATSlocal (ats_ptr_type, tmp5) ;
// ATSlocal_void (tmp6) ;
// ATSlocal_void (tmp12) ;
// ATSlocal_void (tmp13) ;

__ats_lab_matrix_make_elt_01652_ats_char_type:
tmp2 = atspre_mul2_size1_size1 (arg0, arg1) ;
tmp3 = ats_selsin_mac(tmp2, atslab_1) ;
tmp4 = atspre_array_ptr_alloc_tsz (tmp3, sizeof(ats_char_type)) ;
tmp5 = ats_selsin_mac(tmp4, atslab_2) ;
/* tmp6 = */ array_ptr_initialize_elt_01568_ats_char_type (tmp5, tmp3, arg2) ;
/* tmp12 = */ atspre_vbox_make_view_ptr (tmp5) ;
/* tmp13 = ats_selsin_mac(tmp12, atslab_1) */ ;
tmp1 = tmp5 ;
return (tmp1) ;
} /* end of [matrix_make_elt_01652_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 2546(line=91, offs=24) -- 2623(line=92, offs=58)
*/
ATSstaticdec()
ats_ptr_type
matrix_ptr_takeout_elt_01648_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp28) ;

__ats_lab_matrix_ptr_takeout_elt_01648_ats_char_type:
tmp28 = atspre_matrix_ptr_takeout_elt_tsz (arg0, arg1, arg2, arg3, sizeof(ats_char_type)) ;
return (tmp28) ;
} /* end of [matrix_ptr_takeout_elt_01648_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 7273(line=276, offs=19) -- 7478(line=284, offs=4)
*/
ATSstaticdec()
ats_char_type
matrix_get_elt_at_01656_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3) {
/* local vardec */
ATSlocal (ats_char_type, tmp26) ;
ATSlocal (ats_ptr_type, tmp27) ;
ATSlocal (ats_ptr_type, tmp29) ;
ATSlocal (ats_ptr_type, tmp30) ;

__ats_lab_matrix_get_elt_at_01656_ats_char_type:
tmp29 = ats_selsin_mac(arg0, atslab_data) ;
tmp27 = matrix_ptr_takeout_elt_01648_ats_char_type (tmp29, arg1, arg2, arg3) ;
tmp30 = ats_selsin_mac(tmp27, atslab_2) ;
tmp26 = ats_ptrget_mac(ats_char_type, tmp30) ;
return (tmp26) ;
} /* end of [matrix_get_elt_at_01656_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 7862(line=303, offs=3) -- 7972(line=307, offs=4)
*/
ATSstaticdec()
ats_char_type
matrix_get_elt_at__intsz_01658_ats_char_type (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) {
/* local vardec */
ATSlocal (ats_char_type, tmp22) ;
ATSlocal (ats_size_type, tmp23) ;
ATSlocal (ats_size_type, tmp24) ;
ATSlocal (ats_size_type, tmp25) ;

__ats_lab_matrix_get_elt_at__intsz_01658_ats_char_type:
tmp23 = atspre_size1_of_int1 (arg1) ;
tmp24 = atspre_size1_of_int1 (arg2) ;
tmp25 = atspre_size1_of_int1 (arg3) ;
tmp22 = matrix_get_elt_at_01656_ats_char_type (arg0, tmp23, tmp24, tmp25) ;
return (tmp22) ;
} /* end of [matrix_get_elt_at__intsz_01658_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 1578(line=76, offs=4) -- 1742(line=81, offs=20)
*/
ATSstaticdec()
ats_char_type
frame_get_at_3 (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_char_type, tmp17) ;
ATSlocal (ats_bool_type, tmp18) ;
ATSlocal (ats_bool_type, tmp19) ;
ATSlocal (ats_bool_type, tmp20) ;
ATSlocal (ats_bool_type, tmp21) ;

__ats_lab_frame_get_at_3:
tmp18 = atspre_ilt (arg0, 0) ;
if (tmp18) {
tmp17 = '\000' ;
} else {
tmp19 = atspre_igt (arg0, 28) ;
if (tmp19) {
tmp17 = '\000' ;
} else {
tmp20 = atspre_ilt (arg1, 0) ;
if (tmp20) {
tmp17 = '\000' ;
} else {
tmp21 = atspre_igte (arg1, 20) ;
if (tmp21) {
tmp17 = '\000' ;
} else {
tmp17 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, arg0, 20, arg1) ;
} /* end of [if] */
} /* end of [if] */
} /* end of [if] */
} /* end of [if] */
return (tmp17) ;
} /* end of [frame_get_at_3] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 7541(line=287, offs=19) -- 7746(line=295, offs=4)
*/
ATSstaticdec()
ats_void_type
matrix_set_elt_at_01657_ats_char_type (ats_ptr_type arg0, ats_size_type arg1, ats_size_type arg2, ats_size_type arg3, ats_char_type arg4) {
/* local vardec */
// ATSlocal_void (tmp40) ;
ATSlocal (ats_ptr_type, tmp41) ;
ATSlocal (ats_ptr_type, tmp42) ;
ATSlocal (ats_ptr_type, tmp43) ;

__ats_lab_matrix_set_elt_at_01657_ats_char_type:
tmp42 = ats_selsin_mac(arg0, atslab_data) ;
tmp41 = matrix_ptr_takeout_elt_01648_ats_char_type (tmp42, arg1, arg2, arg3) ;
tmp43 = ats_selsin_mac(tmp41, atslab_2) ;
ats_ptrget_mac(ats_char_type, tmp43) = arg4 ;
return /* (tmp40) */ ;
} /* end of [matrix_set_elt_at_01657_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/matrix.dats: 8051(line=311, offs=3) -- 8167(line=315, offs=4)
*/
ATSstaticdec()
ats_void_type
matrix_set_elt_at__intsz_01659_ats_char_type (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3, ats_char_type arg4) {
/* local vardec */
// ATSlocal_void (tmp36) ;
ATSlocal (ats_size_type, tmp37) ;
ATSlocal (ats_size_type, tmp38) ;
ATSlocal (ats_size_type, tmp39) ;

__ats_lab_matrix_set_elt_at__intsz_01659_ats_char_type:
tmp37 = atspre_size1_of_int1 (arg1) ;
tmp38 = atspre_size1_of_int1 (arg2) ;
tmp39 = atspre_size1_of_int1 (arg3) ;
/* tmp36 = */ matrix_set_elt_at_01657_ats_char_type (arg0, tmp37, tmp38, tmp39, arg4) ;
return /* (tmp36) */ ;
} /* end of [matrix_set_elt_at__intsz_01659_ats_char_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 1772(line=84, offs=4) -- 1942(line=89, offs=25)
*/
ATSstaticdec()
ats_void_type
frame_set_at_7 (ats_int_type arg0, ats_int_type arg1, ats_char_type arg2) {
/* local vardec */
// ATSlocal_void (tmp31) ;
ATSlocal (ats_bool_type, tmp32) ;
ATSlocal (ats_bool_type, tmp33) ;
ATSlocal (ats_bool_type, tmp34) ;
ATSlocal (ats_bool_type, tmp35) ;

__ats_lab_frame_set_at_7:
tmp32 = atspre_ilt (arg0, 0) ;
if (tmp32) {
/* empty */
} else {
tmp33 = atspre_igt (arg0, 28) ;
if (tmp33) {
/* empty */
} else {
tmp34 = atspre_ilt (arg1, 0) ;
if (tmp34) {
/* empty */
} else {
tmp35 = atspre_igte (arg1, 20) ;
if (tmp35) {
/* empty */
} else {
/* tmp31 = */ matrix_set_elt_at__intsz_01659_ats_char_type (statmp0, arg0, 20, arg1, arg2) ;
} /* end of [if] */
} /* end of [if] */
} /* end of [if] */
} /* end of [if] */
return /* (tmp31) */ ;
} /* end of [frame_set_at_7] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2059(line=100, offs=4) -- 2099(line=100, offs=44)
*/
ATSstaticdec()
ats_void_type
curs_clear_10 () {
/* local vardec */
// ATSlocal_void (tmp44) ;

__ats_lab_curs_clear_10:
/* tmp44 = */ atspre_print_string (ATSstrcst("\033[H\033[2J")) ;
return /* (tmp44) */ ;
} /* end of [curs_clear_10] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2103(line=101, offs=4) -- 2141(line=101, offs=42)
*/
ATSstaticdec()
ats_void_type
curs_home_11 () {
/* local vardec */
// ATSlocal_void (tmp45) ;

__ats_lab_curs_home_11:
/* tmp45 = */ atspre_print_string (ATSstrcst("\033[H")) ;
return /* (tmp45) */ ;
} /* end of [curs_home_11] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2146(line=103, offs=4) -- 2190(line=103, offs=48)
*/
ATSstaticdec()
ats_void_type
curs_invisible_12 () {
/* local vardec */
// ATSlocal_void (tmp46) ;

__ats_lab_curs_invisible_12:
/* tmp46 = */ atspre_print_string (ATSstrcst("\033[?25l")) ;
return /* (tmp46) */ ;
} /* end of [curs_invisible_12] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2194(line=104, offs=4) -- 2235(line=104, offs=45)
*/
ATSstaticdec()
ats_void_type
curs_normal_13 () {
/* local vardec */
// ATSlocal_void (tmp47) ;

__ats_lab_curs_normal_13:
/* tmp47 = */ atspre_print_string (ATSstrcst("\033[?25h")) ;
return /* (tmp47) */ ;
} /* end of [curs_normal_13] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2241(line=106, offs=5) -- 2323(line=107, offs=54)
*/
ATSstaticdec()
ats_void_type
curs_upward_14 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp48) ;
ATSlocal (ats_bool_type, tmp49) ;
// ATSlocal_void (tmp50) ;
ATSlocal (ats_int_type, tmp51) ;

__ats_lab_curs_upward_14:
tmp49 = atspre_igt (arg0, 0) ;
if (tmp49) {
/* tmp50 = */ atspre_print_string (ATSstrcst("\033[1A")) ;
tmp51 = atspre_isub (arg0, 1) ;
arg0 = tmp51 ;
goto __ats_lab_curs_upward_14 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp48) */ ;
} /* end of [curs_upward_14] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2329(line=109, offs=5) -- 2415(line=110, offs=56)
*/
ATSstaticdec()
ats_void_type
curs_downward_15 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp52) ;
ATSlocal (ats_bool_type, tmp53) ;
// ATSlocal_void (tmp54) ;
ATSlocal (ats_int_type, tmp55) ;

__ats_lab_curs_downward_15:
tmp53 = atspre_igt (arg0, 0) ;
if (tmp53) {
/* tmp54 = */ atspre_print_string (ATSstrcst("\033[1B")) ;
tmp55 = atspre_isub (arg0, 1) ;
arg0 = tmp55 ;
goto __ats_lab_curs_downward_15 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp52) */ ;
} /* end of [curs_downward_15] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2421(line=112, offs=5) -- 2505(line=113, offs=55)
*/
ATSstaticdec()
ats_void_type
curs_forward_16 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp56) ;
ATSlocal (ats_bool_type, tmp57) ;
// ATSlocal_void (tmp58) ;
ATSlocal (ats_int_type, tmp59) ;

__ats_lab_curs_forward_16:
tmp57 = atspre_igt (arg0, 0) ;
if (tmp57) {
/* tmp58 = */ atspre_print_string (ATSstrcst("\033[1C")) ;
tmp59 = atspre_isub (arg0, 1) ;
arg0 = tmp59 ;
goto __ats_lab_curs_forward_16 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp56) */ ;
} /* end of [curs_forward_16] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2511(line=115, offs=5) -- 2597(line=116, offs=56)
*/
ATSstaticdec()
ats_void_type
curs_backward_17 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp60) ;
ATSlocal (ats_bool_type, tmp61) ;
// ATSlocal_void (tmp62) ;
ATSlocal (ats_int_type, tmp63) ;

__ats_lab_curs_backward_17:
tmp61 = atspre_igt (arg0, 0) ;
if (tmp61) {
/* tmp62 = */ atspre_print_string (ATSstrcst("\033[1D")) ;
tmp63 = atspre_isub (arg0, 1) ;
arg0 = tmp63 ;
goto __ats_lab_curs_backward_17 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp60) */ ;
} /* end of [curs_backward_17] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2603(line=118, offs=5) -- 2821(line=123, offs=6)
*/
ATSstaticdec()
ats_void_type
curs_goto_18 (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp64) ;
ATSlocal (ats_int_type, tmp65) ;
ATSlocal (ats_int_type, tmp66) ;
// ATSlocal_void (tmp67) ;
// ATSlocal_void (tmp68) ;
ATSlocal (ats_bool_type, tmp69) ;
ATSlocal (ats_int_type, tmp70) ;
ATSlocal (ats_bool_type, tmp71) ;
ATSlocal (ats_int_type, tmp72) ;

__ats_lab_curs_goto_18:
tmp65 = atspre_iadd (arg0, 3) ;
tmp66 = atspre_iadd (arg1, 1) ;
/* tmp67 = */ curs_home_11 () ;
tmp69 = atspre_igte (tmp65, 0) ;
if (tmp69) {
/* tmp68 = */ curs_downward_15 (tmp65) ;
} else {
tmp70 = atspre_ineg (tmp65) ;
/* tmp68 = */ curs_upward_14 (tmp70) ;
} /* end of [if] */
tmp71 = atspre_igte (tmp66, 0) ;
if (tmp71) {
/* tmp64 = */ curs_forward_16 (tmp66) ;
} else {
tmp72 = atspre_ineg (tmp66) ;
/* tmp64 = */ curs_backward_17 (tmp72) ;
} /* end of [if] */
return /* (tmp64) */ ;
} /* end of [curs_goto_18] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2827(line=125, offs=5) -- 2980(line=129, offs=6)
*/
ATSstaticdec()
ats_void_type
print_vertical_line_up_19 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp73) ;
ATSlocal (ats_bool_type, tmp74) ;
// ATSlocal_void (tmp75) ;
// ATSlocal_void (tmp76) ;
// ATSlocal_void (tmp77) ;
ATSlocal (ats_int_type, tmp78) ;

__ats_lab_print_vertical_line_up_19:
tmp74 = atspre_igt (arg0, 0) ;
if (tmp74) {
/* tmp75 = */ atspre_print_char ('|') ;
/* tmp76 = */ atspre_print_string (ATSstrcst("\033[1D")) ;
/* tmp77 = */ atspre_print_string (ATSstrcst("\033[1A")) ;
tmp78 = atspre_isub (arg0, 1) ;
arg0 = tmp78 ;
goto __ats_lab_print_vertical_line_up_19 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp73) */ ;
} /* end of [print_vertical_line_up_19] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 2986(line=131, offs=5) -- 3139(line=135, offs=6)
*/
ATSstaticdec()
ats_void_type
print_vertical_line_dn_20 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp79) ;
ATSlocal (ats_bool_type, tmp80) ;
// ATSlocal_void (tmp81) ;
// ATSlocal_void (tmp82) ;
// ATSlocal_void (tmp83) ;
ATSlocal (ats_int_type, tmp84) ;

__ats_lab_print_vertical_line_dn_20:
tmp80 = atspre_igt (arg0, 0) ;
if (tmp80) {
/* tmp81 = */ atspre_print_char ('|') ;
/* tmp82 = */ atspre_print_string (ATSstrcst("\033[1D")) ;
/* tmp83 = */ atspre_print_string (ATSstrcst("\033[1B")) ;
tmp84 = atspre_isub (arg0, 1) ;
arg0 = tmp84 ;
goto __ats_lab_print_vertical_line_dn_20 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp79) */ ;
} /* end of [print_vertical_line_dn_20] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 3145(line=137, offs=5) -- 3256(line=140, offs=6)
*/
ATSstaticdec()
ats_void_type
print_horizontal_line_21 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp85) ;
ATSlocal (ats_bool_type, tmp86) ;
// ATSlocal_void (tmp87) ;
ATSlocal (ats_int_type, tmp88) ;

__ats_lab_print_horizontal_line_21:
tmp86 = atspre_igt (arg0, 0) ;
if (tmp86) {
/* tmp87 = */ atspre_print_char ('_') ;
tmp88 = atspre_isub (arg0, 1) ;
arg0 = tmp88 ;
goto __ats_lab_print_horizontal_line_21 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp85) */ ;
} /* end of [print_horizontal_line_21] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 3261(line=142, offs=4) -- 3402(line=147, offs=4)
*/
ATSstaticdec()
ats_void_type
print_frame_22 () {
/* local vardec */
// ATSlocal_void (tmp89) ;
// ATSlocal_void (tmp90) ;
ATSlocal (ats_int_type, tmp91) ;
// ATSlocal_void (tmp92) ;
// ATSlocal_void (tmp93) ;

__ats_lab_print_frame_22:
tmp91 = atspre_isub (28, 1) ;
/* tmp90 = */ print_vertical_line_dn_20 (tmp91) ;
/* tmp92 = */ atspre_print_char ('|') ;
/* tmp93 = */ print_horizontal_line_21 (20) ;
/* tmp89 = */ print_vertical_line_up_19 (28) ;
return /* (tmp89) */ ;
} /* end of [print_frame_22] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 3407(line=149, offs=4) -- 3525(line=152, offs=22)
*/
ATSstaticdec()
ats_void_type
print_block_23 (ats_char_type arg0, ats_bool_type arg1) {
/* local vardec */
// ATSlocal_void (tmp94) ;
ATSlocal (ats_bool_type, tmp95) ;

__ats_lab_print_block_23:
tmp95 = atspre_neq_char_char (arg0, ' ') ;
if (tmp95) {
if (arg1) {
/* tmp94 = */ atspre_print_char (arg0) ;
} else {
/* tmp94 = */ atspre_print_char (' ') ;
} /* end of [if] */
} else {
/* tmp94 = */ curs_forward_16 (1) ;
} /* end of [if] */
return /* (tmp94) */ ;
} /* end of [print_block_23] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 3869(line=172, offs=7) -- 4561(line=192, offs=14)
*/
ATSstaticdec()
ats_bool_type
aux_25 (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_bool_type, tmp102) ;
ATSlocal (ats_bool_type, tmp103) ;
ATSlocal (ats_bool_type, tmp104) ;
ATSlocal (anairiats_rec_3, tmp105) ;
ATSlocal (ats_int_type, tmp106) ;
ATSlocal (ats_int_type, tmp107) ;
ATSlocal (ats_int_type, tmp108) ;
ATSlocal (ats_int_type, tmp109) ;
ATSlocal (ats_int_type, tmp110) ;
ATSlocal (ats_int_type, tmp111) ;
ATSlocal (ats_int_type, tmp112) ;
ATSlocal (ats_int_type, tmp113) ;
ATSlocal (ats_int_type, tmp114) ;
ATSlocal (ats_int_type, tmp115) ;
ATSlocal (ats_int_type, tmp116) ;
ATSlocal (ats_int_type, tmp117) ;
ATSlocal (ats_int_type, tmp118) ;
ATSlocal (ats_int_type, tmp119) ;
ATSlocal (ats_int_type, tmp120) ;
ATSlocal (ats_int_type, tmp121) ;
ATSlocal (ats_int_type, tmp122) ;
ATSlocal (ats_int_type, tmp123) ;
ATSlocal (ats_int_type, tmp124) ;
ATSlocal (ats_int_type, tmp125) ;
ATSlocal (ats_int_type, tmp126) ;
ATSlocal (ats_int_type, tmp127) ;
ATSlocal (ats_char_type, tmp128) ;
ATSlocal (ats_bool_type, tmp129) ;
ATSlocal (ats_bool_type, tmp130) ;
ATSlocal (ats_bool_type, tmp131) ;
ATSlocal (ats_char_type, tmp132) ;
ATSlocal (ats_int_type, tmp133) ;
ATSlocal (ats_int_type, tmp134) ;
ATSlocal (ats_int_type, tmp135) ;

__ats_lab_aux_25:
tmp103 = atspre_ilt (arg0, env3) ;
if (tmp103) {
tmp104 = atspre_ilt (arg1, env4) ;
if (tmp104) {
do {
/* branch: __ats_lab_0 */
__ats_lab_0_0:
if (env0 != 0) { goto __ats_lab_1_0 ; }
__ats_lab_0_1:
tmp107 = atspre_isub (env1, env6) ;
tmp106 = atspre_iadd (tmp107, arg0) ;
tmp109 = atspre_isub (env2, env7) ;
tmp108 = atspre_iadd (tmp109, arg1) ;
tmp105.atslab_0 = tmp106 ;
tmp105.atslab_1 = tmp108 ;

break ;

/* branch: __ats_lab_1 */
__ats_lab_1_0:
if (env0 != 1) { goto __ats_lab_2_0 ; }
__ats_lab_1_1:
tmp111 = atspre_isub (env1, env7) ;
tmp110 = atspre_iadd (tmp111, arg1) ;
tmp114 = atspre_iadd (env2, env6) ;
tmp113 = atspre_isub (tmp114, arg0) ;
tmp112 = atspre_isub (tmp113, 1) ;
tmp105.atslab_0 = tmp110 ;
tmp105.atslab_1 = tmp112 ;

break ;

/* branch: __ats_lab_2 */
__ats_lab_2_0:
if (env0 != 2) { goto __ats_lab_3_0 ; }
__ats_lab_2_1:
tmp117 = atspre_iadd (env1, env6) ;
tmp116 = atspre_isub (tmp117, arg0) ;
tmp115 = atspre_isub (tmp116, 1) ;
tmp120 = atspre_iadd (env2, env7) ;
tmp119 = atspre_isub (tmp120, arg1) ;
tmp118 = atspre_isub (tmp119, 1) ;
tmp105.atslab_0 = tmp115 ;
tmp105.atslab_1 = tmp118 ;

break ;

/* branch: __ats_lab_3 */
__ats_lab_3_0:
// if (env0 != 3) { ats_deadcode_failure_handle () ; }
__ats_lab_3_1:
tmp123 = atspre_iadd (env1, env7) ;
tmp122 = atspre_isub (tmp123, arg1) ;
tmp121 = atspre_isub (tmp122, 1) ;
tmp125 = atspre_isub (env2, env6) ;
tmp124 = atspre_iadd (tmp125, arg0) ;
tmp105.atslab_0 = tmp121 ;
tmp105.atslab_1 = tmp124 ;

break ;
} while (0) ;
tmp126 = ats_select_mac(tmp105, atslab_0) ;
tmp127 = ats_select_mac(tmp105, atslab_1) ;
tmp128 = frame_get_at_3 (tmp126, tmp127) ;
tmp129 = atspre_eq_char_char (tmp128, '\000') ;
if (tmp129) {
tmp102 = ats_false_bool ;
} else {
tmp130 = atspre_neq_char_char (tmp128, ' ') ;
if (tmp130) {
tmp132 = matrix_get_elt_at__intsz_01658_ats_char_type (env5, arg0, env4, arg1) ;
tmp131 = atspre_eq_char_char (tmp132, ' ') ;
if (tmp131) {
tmp133 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp133 ;
goto __ats_lab_aux_25 ; // tail call
} else {
tmp102 = ats_false_bool ;
} /* end of [if] */
} else {
tmp134 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp134 ;
goto __ats_lab_aux_25 ; // tail call
} /* end of [if] */
} /* end of [if] */
} else {
tmp135 = atspre_iadd (arg0, 1) ;
arg0 = tmp135 ;
arg1 = 0 ;
goto __ats_lab_aux_25 ; // tail call
} /* end of [if] */
} else {
tmp102 = ats_true_bool ;
} /* end of [if] */
return (tmp102) ;
} /* end of [aux_25] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_int_type closure_env_2 ;
ats_int_type closure_env_3 ;
ats_int_type closure_env_4 ;
ats_ptr_type closure_env_5 ;
ats_int_type closure_env_6 ;
ats_int_type closure_env_7 ;
} aux_25_closure_type ;

ats_bool_type
aux_25_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
return aux_25 (((aux_25_closure_type*)cloptr)->closure_env_0, ((aux_25_closure_type*)cloptr)->closure_env_1, ((aux_25_closure_type*)cloptr)->closure_env_2, ((aux_25_closure_type*)cloptr)->closure_env_3, ((aux_25_closure_type*)cloptr)->closure_env_4, ((aux_25_closure_type*)cloptr)->closure_env_5, ((aux_25_closure_type*)cloptr)->closure_env_6, ((aux_25_closure_type*)cloptr)->closure_env_7, arg0, arg1) ;
} /* end of function */

ATSinline()
ats_void_type
aux_25_closure_init (aux_25_closure_type *p_clo, ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_25_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
p_clo->closure_env_4 = env4 ;
p_clo->closure_env_5 = env5 ;
p_clo->closure_env_6 = env6 ;
p_clo->closure_env_7 = env7 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_25_closure_make (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) {
aux_25_closure_type *p_clo = ATS_MALLOC(sizeof(aux_25_closure_type)) ;
aux_25_closure_init (p_clo, env0, env1, env2, env3, env4, env5, env6, env7) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 3696(line=168, offs=4) -- 4599(line=196, offs=4)
*/
ATSstaticdec()
ats_bool_type
move_test_24 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) {
/* local vardec */
ATSlocal (ats_bool_type, tmp96) ;
ATSlocal (ats_int_type, tmp97) ;
ATSlocal (ats_int_type, tmp98) ;
ATSlocal (ats_ptr_type, tmp99) ;
ATSlocal (ats_int_type, tmp100) ;
ATSlocal (ats_int_type, tmp101) ;

__ats_lab_move_test_24:
tmp97 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp98 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp99 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
tmp100 = atspre_nhalf (tmp97) ;
tmp101 = atspre_nhalf (tmp98) ;
tmp96 = aux_25 (arg1, arg2, arg3, tmp97, tmp98, tmp99, tmp100, tmp101, 0, 0) ;
return (tmp96) ;
} /* end of [move_test_24] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 4800(line=204, offs=7) -- 5336(line=219, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_27 (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp142) ;
ATSlocal (ats_bool_type, tmp143) ;
ATSlocal (ats_bool_type, tmp144) ;
ATSlocal (anairiats_rec_3, tmp145) ;
ATSlocal (ats_int_type, tmp146) ;
ATSlocal (ats_int_type, tmp147) ;
ATSlocal (ats_int_type, tmp148) ;
ATSlocal (ats_int_type, tmp149) ;
ATSlocal (ats_int_type, tmp150) ;
ATSlocal (ats_int_type, tmp151) ;
ATSlocal (ats_int_type, tmp152) ;
ATSlocal (ats_int_type, tmp153) ;
ATSlocal (ats_int_type, tmp154) ;
ATSlocal (ats_int_type, tmp155) ;
ATSlocal (ats_int_type, tmp156) ;
ATSlocal (ats_int_type, tmp157) ;
ATSlocal (ats_int_type, tmp158) ;
ATSlocal (ats_int_type, tmp159) ;
ATSlocal (ats_int_type, tmp160) ;
ATSlocal (ats_int_type, tmp161) ;
ATSlocal (ats_int_type, tmp162) ;
ATSlocal (ats_int_type, tmp163) ;
ATSlocal (ats_int_type, tmp164) ;
ATSlocal (ats_int_type, tmp165) ;
ATSlocal (ats_int_type, tmp166) ;
ATSlocal (ats_int_type, tmp167) ;
ATSlocal (ats_char_type, tmp168) ;
// ATSlocal_void (tmp169) ;
ATSlocal (ats_bool_type, tmp170) ;
ATSlocal (ats_int_type, tmp171) ;
ATSlocal (ats_int_type, tmp172) ;

__ats_lab_aux_27:
tmp143 = atspre_ilt (arg0, env3) ;
if (tmp143) {
tmp144 = atspre_ilt (arg1, env4) ;
if (tmp144) {
do {
/* branch: __ats_lab_4 */
__ats_lab_4_0:
if (env0 != 0) { goto __ats_lab_5_0 ; }
__ats_lab_4_1:
tmp147 = atspre_isub (env1, env6) ;
tmp146 = atspre_iadd (tmp147, arg0) ;
tmp149 = atspre_isub (env2, env7) ;
tmp148 = atspre_iadd (tmp149, arg1) ;
tmp145.atslab_0 = tmp146 ;
tmp145.atslab_1 = tmp148 ;

break ;

/* branch: __ats_lab_5 */
__ats_lab_5_0:
if (env0 != 1) { goto __ats_lab_6_0 ; }
__ats_lab_5_1:
tmp151 = atspre_isub (env1, env7) ;
tmp150 = atspre_iadd (tmp151, arg1) ;
tmp154 = atspre_iadd (env2, env6) ;
tmp153 = atspre_isub (tmp154, arg0) ;
tmp152 = atspre_isub (tmp153, 1) ;
tmp145.atslab_0 = tmp150 ;
tmp145.atslab_1 = tmp152 ;

break ;

/* branch: __ats_lab_6 */
__ats_lab_6_0:
if (env0 != 2) { goto __ats_lab_7_0 ; }
__ats_lab_6_1:
tmp157 = atspre_iadd (env1, env6) ;
tmp156 = atspre_isub (tmp157, arg0) ;
tmp155 = atspre_isub (tmp156, 1) ;
tmp160 = atspre_iadd (env2, env7) ;
tmp159 = atspre_isub (tmp160, arg1) ;
tmp158 = atspre_isub (tmp159, 1) ;
tmp145.atslab_0 = tmp155 ;
tmp145.atslab_1 = tmp158 ;

break ;

/* branch: __ats_lab_7 */
__ats_lab_7_0:
// if (env0 != 3) { ats_deadcode_failure_handle () ; }
__ats_lab_7_1:
tmp163 = atspre_iadd (env1, env7) ;
tmp162 = atspre_isub (tmp163, arg1) ;
tmp161 = atspre_isub (tmp162, 1) ;
tmp165 = atspre_isub (env2, env6) ;
tmp164 = atspre_iadd (tmp165, arg0) ;
tmp145.atslab_0 = tmp161 ;
tmp145.atslab_1 = tmp164 ;

break ;
} while (0) ;
tmp166 = ats_select_mac(tmp145, atslab_0) ;
tmp167 = ats_select_mac(tmp145, atslab_1) ;
tmp168 = matrix_get_elt_at__intsz_01658_ats_char_type (env5, arg0, env4, arg1) ;
tmp170 = atspre_neq_char_char (tmp168, ' ') ;
if (tmp170) {
/* tmp169 = */ frame_set_at_7 (tmp166, tmp167, tmp168) ;
} else {
/* empty */
} /* end of [if] */
tmp171 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp171 ;
goto __ats_lab_aux_27 ; // tail call
} else {
tmp172 = atspre_iadd (arg0, 1) ;
arg0 = tmp172 ;
arg1 = 0 ;
goto __ats_lab_aux_27 ; // tail call
} /* end of [if] */
} else {
/* empty */
} /* end of [if] */
return /* (tmp142) */ ;
} /* end of [aux_27] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_int_type closure_env_2 ;
ats_int_type closure_env_3 ;
ats_int_type closure_env_4 ;
ats_ptr_type closure_env_5 ;
ats_int_type closure_env_6 ;
ats_int_type closure_env_7 ;
} aux_27_closure_type ;

ats_void_type
aux_27_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_27 (((aux_27_closure_type*)cloptr)->closure_env_0, ((aux_27_closure_type*)cloptr)->closure_env_1, ((aux_27_closure_type*)cloptr)->closure_env_2, ((aux_27_closure_type*)cloptr)->closure_env_3, ((aux_27_closure_type*)cloptr)->closure_env_4, ((aux_27_closure_type*)cloptr)->closure_env_5, ((aux_27_closure_type*)cloptr)->closure_env_6, ((aux_27_closure_type*)cloptr)->closure_env_7, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_27_closure_init (aux_27_closure_type *p_clo, ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_27_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
p_clo->closure_env_4 = env4 ;
p_clo->closure_env_5 = env5 ;
p_clo->closure_env_6 = env6 ;
p_clo->closure_env_7 = env7 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_27_closure_make (ats_int_type env0, ats_int_type env1, ats_int_type env2, ats_int_type env3, ats_int_type env4, ats_ptr_type env5, ats_int_type env6, ats_int_type env7) {
aux_27_closure_type *p_clo = ATS_MALLOC(sizeof(aux_27_closure_type)) ;
aux_27_closure_init (p_clo, env0, env1, env2, env3, env4, env5, env6, env7) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 4630(line=200, offs=4) -- 5389(line=223, offs=4)
*/
ATSstaticdec()
ats_void_type
absorb_26 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_int_type arg3) {
/* local vardec */
// ATSlocal_void (tmp136) ;
ATSlocal (ats_int_type, tmp137) ;
ATSlocal (ats_int_type, tmp138) ;
ATSlocal (ats_ptr_type, tmp139) ;
ATSlocal (ats_int_type, tmp140) ;
ATSlocal (ats_int_type, tmp141) ;

__ats_lab_absorb_26:
tmp137 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp138 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp139 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
tmp140 = atspre_nhalf (tmp137) ;
tmp141 = atspre_nhalf (tmp138) ;
/* tmp136 = */ aux_27 (arg1, arg2, arg3, tmp137, tmp138, tmp139, tmp140, tmp141, 0, 0) ;
return /* (tmp136) */ ;
} /* end of [absorb_26] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5490(line=229, offs=7) -- 5620(line=231, offs=47)
*/
ATSstaticdec()
ats_void_type
loop_29 (ats_int_type env0, ats_int_type arg0, ats_clo_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp174) ;
ATSlocal (ats_bool_type, tmp175) ;
// ATSlocal_void (tmp176) ;
ATSlocal (ats_int_type, tmp177) ;

__ats_lab_loop_29:
tmp175 = atspre_ilt (arg0, env0) ;
if (tmp175) {
/* tmp176 = */ ((ats_void_type(*)(ats_clo_ptr_type, ats_int_type))(ats_closure_fun(arg1))) (arg1, arg0) ;
tmp177 = atspre_iadd (arg0, 1) ;
arg0 = tmp177 ;
arg1 = arg1 ;
goto __ats_lab_loop_29 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp174) */ ;
} /* end of [loop_29] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
} loop_29_closure_type ;

ats_void_type
loop_29_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_clo_ptr_type arg1) {
loop_29 (((loop_29_closure_type*)cloptr)->closure_env_0, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
loop_29_closure_init (loop_29_closure_type *p_clo, ats_int_type env0) {
p_clo->closure_fun = (ats_fun_ptr_type)&loop_29_clofun ;
p_clo->closure_env_0 = env0 ;
return ;
} /* end of function */

ats_clo_ptr_type
loop_29_closure_make (ats_int_type env0) {
loop_29_closure_type *p_clo = ATS_MALLOC(sizeof(loop_29_closure_type)) ;
loop_29_closure_init (p_clo, env0) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5417(line=227, offs=4) -- 5641(line=234, offs=4)
*/
ATSstaticdec()
ats_void_type
iter_28 (ats_int_type arg0, ats_clo_ptr_type arg1) {
/* local vardec */
// ATSlocal_void (tmp173) ;

__ats_lab_iter_28:
/* tmp173 = */ loop_29 (arg0, 0, arg1) ;
return /* (tmp173) */ ;
} /* end of [iter_28] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5779(line=239, offs=15) -- 5835(line=239, offs=71)
*/
ATSstaticdec()
ats_void_type
__ats_fun_32 (ats_int_type env0, ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp181) ;
ATSlocal (ats_char_type, tmp182) ;

__ats_lab___ats_fun_32:
tmp182 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, env0, 20, arg0) ;
/* tmp181 = */ atspre_print_char (tmp182) ;
return /* (tmp181) */ ;
} /* end of [__ats_fun_32] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
} __ats_fun_32_closure_type ;

ats_void_type
__ats_fun_32_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
__ats_fun_32 (((__ats_fun_32_closure_type*)cloptr)->closure_env_0, arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
__ats_fun_32_closure_init (__ats_fun_32_closure_type *p_clo, ats_int_type env0) {
p_clo->closure_fun = (ats_fun_ptr_type)&__ats_fun_32_clofun ;
p_clo->closure_env_0 = env0 ;
return ;
} /* end of function */

ats_clo_ptr_type
__ats_fun_32_closure_make (ats_int_type env0) {
__ats_fun_32_closure_type *p_clo = ATS_MALLOC(sizeof(__ats_fun_32_closure_type)) ;
__ats_fun_32_closure_init (p_clo, env0) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5999(line=246, offs=17) -- 6017(line=246, offs=35)
*/
ATSstaticdec()
ats_void_type
__ats_fun_33 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp191) ;

__ats_lab___ats_fun_33:
/* tmp191 = */ atspre_print_char (' ') ;
return /* (tmp191) */ ;
} /* end of [__ats_fun_33] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} __ats_fun_33_closure_type ;

ats_void_type
__ats_fun_33_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
__ats_fun_33 (arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
__ats_fun_33_closure_init (__ats_fun_33_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&__ats_fun_33_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
__ats_fun_33_closure_make () {
__ats_fun_33_closure_type *p_clo = ATS_MALLOC(sizeof(__ats_fun_33_closure_type)) ;
__ats_fun_33_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5713(line=237, offs=7) -- 6124(line=251, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_31 (ats_int_type env0, ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp179) ;
ATSlocal (ats_bool_type, tmp180) ;
ATSlocal (ats_ptr_type, tmp183) ;
// ATSlocal_void (tmp184) ;
// ATSlocal_void (tmp185) ;
// ATSlocal_void (tmp186) ;
// ATSlocal_void (tmp187) ;
ATSlocal (ats_int_type, tmp188) ;
// ATSlocal_void (tmp189) ;
ATSlocal (ats_ptr_type, tmp190) ;
// ATSlocal_void (tmp192) ;
// ATSlocal_void (tmp193) ;
ATSlocal (ats_int_type, tmp194) ;
ATSlocal (ats_int_type, tmp195) ;

__ats_lab_aux_31:
tmp180 = atspre_igt (arg0, 0) ;
if (tmp180) {
tmp183 = __ats_fun_32_closure_make (env0) ;
/* tmp184 = */ iter_28 (20, tmp183) ;
/* tmp185 = */ atspre_cloptr_free (tmp183) ;
/* tmp186 = */ atslib_fflush_stdout () ;
/* tmp187 = */ curs_backward_17 (20) ;
tmp188 = atslib_usleep (62500) ;
/* ats_ptr_type tmp190 ; */
tmp190 = __ats_fun_33_closure_make () ;
/* tmp189 = */ iter_28 (20, tmp190) ;
ATS_FREE(tmp190) ;
/* tmp192 = */ atslib_fflush_stdout () ;
/* tmp193 = */ curs_backward_17 (20) ;
tmp194 = atslib_usleep (62500) ;
tmp195 = atspre_isub (arg0, 1) ;
arg0 = tmp195 ;
goto __ats_lab_aux_31 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp179) */ ;
} /* end of [aux_31] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
} aux_31_closure_type ;

ats_void_type
aux_31_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
aux_31 (((aux_31_closure_type*)cloptr)->closure_env_0, arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_31_closure_init (aux_31_closure_type *p_clo, ats_int_type env0) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_31_clofun ;
p_clo->closure_env_0 = env0 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_31_closure_make (ats_int_type env0) {
aux_31_closure_type *p_clo = ATS_MALLOC(sizeof(aux_31_closure_type)) ;
aux_31_closure_init (p_clo, env0) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 5663(line=236, offs=4) -- 6218(line=256, offs=4)
*/
ATSstaticdec()
ats_void_type
frame_line_flash_30 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp178) ;
// ATSlocal_void (tmp196) ;
// ATSlocal_void (tmp197) ;
// ATSlocal_void (tmp198) ;

__ats_lab_frame_line_flash_30:
/* tmp196 = */ atspre_print_string (ATSstrcst("\033[1m")) ;
/* tmp197 = */ curs_goto_18 (arg0, 0) ;
/* tmp198 = */ aux_31 (arg0, 3) ;
/* tmp178 = */ atspre_print_string (ATSstrcst("\033[0m")) ;
return /* (tmp178) */ ;
} /* end of [frame_line_flash_30] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6287(line=259, offs=7) -- 6508(line=266, offs=8)
*/
ATSstaticdec()
ats_void_type
aux1_35 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp200) ;
ATSlocal (ats_bool_type, tmp201) ;
ATSlocal (ats_char_type, tmp202) ;
// ATSlocal_void (tmp203) ;
ATSlocal (ats_bool_type, tmp204) ;
ATSlocal (ats_int_type, tmp205) ;
// ATSlocal_void (tmp206) ;

__ats_lab_aux1_35:
tmp201 = atspre_ilt (arg0, 20) ;
if (tmp201) {
tmp202 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, 28, 20, arg0) ;
tmp204 = atspre_eq_char_char (tmp202, ' ') ;
if (tmp204) {
/* tmp203 = */ atspre_print_char ('_') ;
} else {
/* tmp203 = */ atspre_print_char (tmp202) ;
} /* end of [if] */
tmp205 = atspre_iadd (arg0, 1) ;
arg0 = tmp205 ;
goto __ats_lab_aux1_35 ; // tail call
} else {
/* tmp206 = */ curs_backward_17 (20) ;
/* tmp200 = */ curs_upward_14 (1) ;
} /* end of [if] */
return /* (tmp200) */ ;
} /* end of [aux1_35] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux1_35_closure_type ;

ats_void_type
aux1_35_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
aux1_35 (arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux1_35_closure_init (aux1_35_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux1_35_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux1_35_closure_make () {
aux1_35_closure_type *p_clo = ATS_MALLOC(sizeof(aux1_35_closure_type)) ;
aux1_35_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6531(line=268, offs=7) -- 6789(line=275, offs=12)
*/
ATSstaticdec()
ats_void_type
aux2_36 (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp207) ;
ATSlocal (ats_bool_type, tmp208) ;
ATSlocal (ats_bool_type, tmp209) ;
// ATSlocal_void (tmp210) ;
ATSlocal (ats_char_type, tmp211) ;
ATSlocal (ats_int_type, tmp212) ;
// ATSlocal_void (tmp213) ;
// ATSlocal_void (tmp214) ;
ATSlocal (ats_int_type, tmp215) ;

__ats_lab_aux2_36:
tmp208 = atspre_igte (arg0, 0) ;
if (tmp208) {
tmp209 = atspre_ilt (arg1, 20) ;
if (tmp209) {
tmp211 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, arg0, 20, arg1) ;
/* tmp210 = */ atspre_print_char (tmp211) ;
tmp212 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp212 ;
goto __ats_lab_aux2_36 ; // tail call
} else {
/* tmp213 = */ curs_backward_17 (20) ;
/* tmp214 = */ curs_upward_14 (1) ;
tmp215 = atspre_isub (arg0, 1) ;
arg0 = tmp215 ;
arg1 = 0 ;
goto __ats_lab_aux2_36 ; // tail call
} /* end of [if] */
} else {
/* empty */
} /* end of [if] */
return /* (tmp207) */ ;
} /* end of [aux2_36] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux2_36_closure_type ;

ats_void_type
aux2_36_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux2_36 (arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux2_36_closure_init (aux2_36_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux2_36_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux2_36_closure_make () {
aux2_36_closure_type *p_clo = ATS_MALLOC(sizeof(aux2_36_closure_type)) ;
aux2_36_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6252(line=258, offs=4) -- 6844(line=278, offs=4)
*/
ATSstaticdec()
ats_void_type
frame_display_34 () {
/* local vardec */
// ATSlocal_void (tmp199) ;
// ATSlocal_void (tmp216) ;
// ATSlocal_void (tmp217) ;
ATSlocal (ats_int_type, tmp218) ;

__ats_lab_frame_display_34:
/* tmp216 = */ curs_goto_18 (28, 0) ;
/* tmp217 = */ aux1_35 (0) ;
tmp218 = atspre_isub (28, 1) ;
/* tmp199 = */ aux2_36 (tmp218, 0) ;
return /* (tmp199) */ ;
} /* end of [frame_display_34] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6945(line=281, offs=7) -- 7040(line=282, offs=42)
*/
ATSstaticdec()
ats_int_type
aux1_38 (ats_int_type arg0) {
/* local vardec */
ATSlocal (ats_int_type, tmp232) ;

tmp232 = aux1_38_0aux2_39 (0, arg0) ;
return (tmp232) ;
} /* end of [aux1_38] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux1_38_closure_type ;

ats_int_type
aux1_38_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
return aux1_38 (arg0) ;
} /* end of function */

ATSinline()
ats_void_type
aux1_38_closure_init (aux1_38_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux1_38_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux1_38_closure_make () {
aux1_38_closure_type *p_clo = ATS_MALLOC(sizeof(aux1_38_closure_type)) ;
aux1_38_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 7048(line=284, offs=7) -- 7263(line=290, offs=8)
*/
ATSstaticdec()
ats_int_type
aux2_39 (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_int_type, tmp233) ;

tmp233 = aux1_38_0aux2_39 (1, arg0, arg1) ;
return (tmp233) ;
} /* end of [aux2_39] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux2_39_closure_type ;

ats_int_type
aux2_39_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
return aux2_39 (arg0, arg1) ;
} /* end of function */

ATSinline()
ats_void_type
aux2_39_closure_init (aux2_39_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux2_39_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux2_39_closure_make () {
aux2_39_closure_type *p_clo = ATS_MALLOC(sizeof(aux2_39_closure_type)) ;
aux2_39_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6945(line=281, offs=7) -- 7263(line=290, offs=8)
*/
ATSstaticdec()
ats_int_type
aux1_38_0aux2_39 (ats_int_type arg0, ...) {
/* local vardec */
ATSlocal (ats_int_type, tmp220) ;
ATSlocal (ats_int_type, tmp221) ;
ATSlocal (ats_int_type, tmp222) ;
ATSlocal (ats_int_type, tmp223) ;
ATSlocal (ats_bool_type, tmp224) ;
ATSlocal (ats_int_type, tmp225) ;
ATSlocal (ats_bool_type, tmp226) ;
ATSlocal (ats_bool_type, tmp227) ;
ATSlocal (ats_char_type, tmp228) ;
ATSlocal (ats_int_type, tmp229) ;
ATSlocal (ats_int_type, tmp230) ;
ATSlocal (ats_int_type, tmp231) ;

va_list funarg ;

switch (arg0) {
case 0:
va_start(funarg, arg0) ;
tmp220 = va_arg(funarg, ats_int_type) ;
va_end(funarg) ;
goto __ats_lab_aux1_38 ;

case 1:
va_start(funarg, arg0) ;
tmp221 = va_arg(funarg, ats_int_type) ;
tmp222 = va_arg(funarg, ats_int_type) ;
va_end(funarg) ;
goto __ats_lab_aux2_39 ;

default: exit(1) ; /* deadcode */
} /* end of switch */

ATSlocal (va_list, arg1) ;
va_start(arg1, arg0) ;

__ats_lab_aux1_38:
tmp224 = atspre_ilte (tmp220, 28) ;
if (tmp224) {
tmp221 = tmp220 ;
tmp222 = 0 ;
goto __ats_lab_aux2_39 ; // tail call
} else {
tmp223 = -1 ;
} /* end of [if] */
return tmp223 ;

__ats_lab_aux2_39:
tmp226 = atspre_ilt (tmp222, 20) ;
if (tmp226) {
tmp228 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, tmp221, 20, tmp222) ;
tmp227 = atspre_neq_char_char (tmp228, ' ') ;
if (tmp227) {
tmp229 = atspre_iadd (tmp222, 1) ;
tmp221 = tmp221 ;
tmp222 = tmp229 ;
goto __ats_lab_aux2_39 ; // tail call
} else {
tmp230 = atspre_iadd (tmp221, 1) ;
tmp220 = tmp230 ;
goto __ats_lab_aux1_38 ; // tail call
} /* end of [if] */
} else {
tmp225 = tmp221 ;
} /* end of [if] */
return tmp225 ;

return (tmp231) ;
} /* end of [aux1_38_0aux2_39] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 6875(line=280, offs=4) -- 7296(line=293, offs=4)
*/
ATSstaticdec()
ats_int_type
frame_find_37 () {
/* local vardec */
ATSlocal (ats_int_type, tmp219) ;

__ats_lab_frame_find_37:
tmp219 = aux1_38 (0) ;
return (tmp219) ;
} /* end of [frame_find_37] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 7345(line=297, offs=4) -- 7829(line=310, offs=4)
*/
ATSstaticdec()
ats_void_type
print_usage_41 () {
/* local vardec */
// ATSlocal_void (tmp234) ;
// ATSlocal_void (tmp235) ;
ATSlocal (ats_int_type, tmp236) ;
ATSlocal (ats_int_type, tmp237) ;
// ATSlocal_void (tmp238) ;
// ATSlocal_void (tmp239) ;
ATSlocal (ats_int_type, tmp240) ;
ATSlocal (ats_int_type, tmp241) ;
// ATSlocal_void (tmp242) ;
// ATSlocal_void (tmp243) ;
ATSlocal (ats_int_type, tmp244) ;
ATSlocal (ats_int_type, tmp245) ;
// ATSlocal_void (tmp246) ;
// ATSlocal_void (tmp247) ;
ATSlocal (ats_int_type, tmp248) ;
ATSlocal (ats_int_type, tmp249) ;
// ATSlocal_void (tmp250) ;
// ATSlocal_void (tmp251) ;
ATSlocal (ats_int_type, tmp252) ;
ATSlocal (ats_int_type, tmp253) ;
// ATSlocal_void (tmp254) ;
// ATSlocal_void (tmp255) ;
ATSlocal (ats_int_type, tmp256) ;
ATSlocal (ats_int_type, tmp257) ;

__ats_lab_print_usage_41:
tmp236 = atspre_iadd (2, 2) ;
tmp237 = atspre_iadd (20, 4) ;
/* tmp235 = */ curs_goto_18 (tmp236, tmp237) ;
/* tmp238 = */ atspre_print_string (ATSstrcst("j: left move")) ;
tmp240 = atspre_iadd (2, 3) ;
tmp241 = atspre_iadd (20, 4) ;
/* tmp239 = */ curs_goto_18 (tmp240, tmp241) ;
/* tmp242 = */ atspre_print_string (ATSstrcst("l: right move")) ;
tmp244 = atspre_iadd (2, 4) ;
tmp245 = atspre_iadd (20, 4) ;
/* tmp243 = */ curs_goto_18 (tmp244, tmp245) ;
/* tmp246 = */ atspre_print_string (ATSstrcst("i: left rotation")) ;
tmp248 = atspre_iadd (2, 5) ;
tmp249 = atspre_iadd (20, 4) ;
/* tmp247 = */ curs_goto_18 (tmp248, tmp249) ;
/* tmp250 = */ atspre_print_string (ATSstrcst("k: right rotation")) ;
tmp252 = atspre_iadd (2, 6) ;
tmp253 = atspre_iadd (20, 4) ;
/* tmp251 = */ curs_goto_18 (tmp252, tmp253) ;
/* tmp254 = */ atspre_print_string (ATSstrcst("space: fall straight")) ;
tmp256 = atspre_iadd (2, 8) ;
tmp257 = atspre_iadd (20, 4) ;
/* tmp255 = */ curs_goto_18 (tmp256, tmp257) ;
/* tmp234 = */ atspre_print_string (ATSstrcst("Please press the RETURN key to start the game.")) ;
return /* (tmp234) */ ;
} /* end of [print_usage_41] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/reference.dats: 1828(line=57, offs=18) -- 1902(line=59, offs=4)
*/
ATSstaticdec()
ats_ptr_type
ref_01088_ats_int_type (ats_int_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp260) ;
ATSlocal (ats_int_type, tmp261) ;

__ats_lab_ref_01088_ats_int_type:
/* ats_int_type tmp261 ; */
tmp261 = arg0 ;
tmp260 = atspre_ref_make_elt_tsz ((&tmp261), sizeof(ats_int_type)) ;
return (tmp260) ;
} /* end of [ref_01088_ats_int_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/reference.dats: 1994(line=62, offs=27) -- 2009(line=62, offs=42)
*/
ATSstaticdec()
ats_ptr_type
ref_make_elt_01089_ats_int_type (ats_int_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp259) ;

__ats_lab_ref_make_elt_01089_ats_int_type:
tmp259 = ref_01088_ats_int_type (arg0) ;
return (tmp259) ;
} /* end of [ref_make_elt_01089_ats_int_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 7921(line=315, offs=4) -- 8049(line=317, offs=4)
*/
ATSstaticdec()
ats_void_type
total_number_of_filled_lines_inc_44 () {
/* local vardec */
// ATSlocal_void (tmp262) ;
ATSlocal (ats_int_type, tmp263) ;
ATSlocal (ats_int_type, tmp264) ;

__ats_lab_total_number_of_filled_lines_inc_44:
tmp264 = ats_ptrget_mac(ats_int_type, statmp258) ;
tmp263 = atspre_iadd (tmp264, 1) ;
ats_ptrget_mac(ats_int_type, statmp258) = tmp263 ;
return /* (tmp262) */ ;
} /* end of [total_number_of_filled_lines_inc_44] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8099(line=321, offs=4) -- 8222(line=325, offs=4)
*/
ATSstaticdec()
ats_void_type
print_score_45 () {
/* local vardec */
// ATSlocal_void (tmp265) ;
// ATSlocal_void (tmp266) ;
ATSlocal (ats_int_type, tmp267) ;
ATSlocal (ats_int_type, tmp268) ;
// ATSlocal_void (tmp269) ;
ATSlocal (ats_int_type, tmp270) ;

__ats_lab_print_score_45:
tmp268 = atspre_iadd (20, 4) ;
tmp267 = atspre_iadd (tmp268, 7) ;
/* tmp266 = */ curs_goto_18 (2, tmp267) ;
tmp270 = ats_ptrget_mac(ats_int_type, statmp258) ;
/* tmp269 = */ atspre_print_int (tmp270) ;
/* tmp265 = */ atslib_fflush_stdout () ;
return /* (tmp265) */ ;
} /* end of [print_score_45] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8356(line=331, offs=13) -- 8456(line=332, offs=66)
*/
ATSstaticdec()
ats_void_type
__ats_fun_48 (ats_int_type env0, ats_int_type env1, ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp273) ;
ATSlocal (ats_char_type, tmp274) ;

__ats_lab___ats_fun_48:
tmp274 = matrix_get_elt_at__intsz_01658_ats_char_type (statmp0, env1, 20, arg0) ;
/* tmp273 = */ matrix_set_elt_at__intsz_01659_ats_char_type (statmp0, env0, 20, arg0, tmp274) ;
return /* (tmp273) */ ;
} /* end of [__ats_fun_48] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
ats_int_type closure_env_1 ;
} __ats_fun_48_closure_type ;

ats_void_type
__ats_fun_48_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
__ats_fun_48 (((__ats_fun_48_closure_type*)cloptr)->closure_env_0, ((__ats_fun_48_closure_type*)cloptr)->closure_env_1, arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
__ats_fun_48_closure_init (__ats_fun_48_closure_type *p_clo, ats_int_type env0, ats_int_type env1) {
p_clo->closure_fun = (ats_fun_ptr_type)&__ats_fun_48_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
return ;
} /* end of function */

ats_clo_ptr_type
__ats_fun_48_closure_make (ats_int_type env0, ats_int_type env1) {
__ats_fun_48_closure_type *p_clo = ATS_MALLOC(sizeof(__ats_fun_48_closure_type)) ;
__ats_fun_48_closure_init (p_clo, env0, env1) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8289(line=330, offs=6) -- 8535(line=337, offs=6)
*/
ATSstaticdec()
ats_void_type
aux1_47 (ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp272) ;
ATSlocal (ats_ptr_type, tmp275) ;
// ATSlocal_void (tmp276) ;

__ats_lab_aux1_47:
tmp275 = __ats_fun_48_closure_make (arg0, arg1) ;
/* tmp276 = */ iter_28 (20, tmp275) ;
/* tmp272 = */ atspre_cloptr_free (tmp275) ;
return /* (tmp272) */ ;
} /* end of [aux1_47] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux1_47_closure_type ;

ats_void_type
aux1_47_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux1_47 (arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux1_47_closure_init (aux1_47_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux1_47_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux1_47_closure_make () {
aux1_47_closure_type *p_clo = ATS_MALLOC(sizeof(aux1_47_closure_type)) ;
aux1_47_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8612(line=340, offs=13) -- 8669(line=340, offs=70)
*/
ATSstaticdec()
ats_void_type
__ats_fun_50 (ats_int_type env0, ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp278) ;

__ats_lab___ats_fun_50:
/* tmp278 = */ matrix_set_elt_at__intsz_01659_ats_char_type (statmp0, env0, 20, arg0, ' ') ;
return /* (tmp278) */ ;
} /* end of [__ats_fun_50] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
} __ats_fun_50_closure_type ;

ats_void_type
__ats_fun_50_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
__ats_fun_50 (((__ats_fun_50_closure_type*)cloptr)->closure_env_0, arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
__ats_fun_50_closure_init (__ats_fun_50_closure_type *p_clo, ats_int_type env0) {
p_clo->closure_fun = (ats_fun_ptr_type)&__ats_fun_50_clofun ;
p_clo->closure_env_0 = env0 ;
return ;
} /* end of function */

ats_clo_ptr_type
__ats_fun_50_closure_make (ats_int_type env0) {
__ats_fun_50_closure_type *p_clo = ATS_MALLOC(sizeof(__ats_fun_50_closure_type)) ;
__ats_fun_50_closure_init (p_clo, env0) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8559(line=339, offs=6) -- 8748(line=345, offs=6)
*/
ATSstaticdec()
ats_void_type
aux2_49 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp277) ;
ATSlocal (ats_ptr_type, tmp279) ;
// ATSlocal_void (tmp280) ;

__ats_lab_aux2_49:
tmp279 = __ats_fun_50_closure_make (arg0) ;
/* tmp280 = */ iter_28 (20, tmp279) ;
/* tmp277 = */ atspre_cloptr_free (tmp279) ;
return /* (tmp277) */ ;
} /* end of [aux2_49] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux2_49_closure_type ;

ats_void_type
aux2_49_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
aux2_49 (arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux2_49_closure_init (aux2_49_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux2_49_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux2_49_closure_make () {
aux2_49_closure_type *p_clo = ATS_MALLOC(sizeof(aux2_49_closure_type)) ;
aux2_49_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8773(line=347, offs=7) -- 8923(line=352, offs=8)
*/
ATSstaticdec()
ats_void_type
aux3_51 (ats_int_type arg0) {
/* local vardec */
// ATSlocal_void (tmp281) ;
ATSlocal (ats_bool_type, tmp282) ;
ATSlocal (ats_int_type, tmp283) ;
// ATSlocal_void (tmp284) ;
ATSlocal (ats_bool_type, tmp285) ;
ATSlocal (ats_int_type, tmp286) ;

__ats_lab_aux3_51:
tmp282 = atspre_igte (arg0, 0) ;
if (tmp282) {
tmp283 = atspre_isub (arg0, 1) ;
tmp285 = atspre_ilt (tmp283, 0) ;
if (tmp285) {
/* tmp284 = */ aux2_49 (arg0) ;
} else {
/* tmp284 = */ aux1_47 (arg0, tmp283) ;
} /* end of [if] */
tmp286 = atspre_isub (arg0, 1) ;
arg0 = tmp286 ;
goto __ats_lab_aux3_51 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp281) */ ;
} /* end of [aux3_51] */

typedef struct {
ats_fun_ptr_type closure_fun ;
} aux3_51_closure_type ;

ats_void_type
aux3_51_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0) {
aux3_51 (arg0) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux3_51_closure_init (aux3_51_closure_type *p_clo) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux3_51_clofun ;
return ;
} /* end of function */

ats_clo_ptr_type
aux3_51_closure_make () {
aux3_51_closure_type *p_clo = ATS_MALLOC(sizeof(aux3_51_closure_type)) ;
aux3_51_closure_init (p_clo) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 8256(line=329, offs=5) -- 9133(line=362, offs=4)
*/
ATSstaticdec()
ats_void_type
frame_delete_46 () {
/* local vardec */
// ATSlocal_void (tmp271) ;
ATSlocal (ats_int_type, tmp287) ;
ATSlocal (ats_bool_type, tmp288) ;
// ATSlocal_void (tmp289) ;
// ATSlocal_void (tmp290) ;
// ATSlocal_void (tmp291) ;
// ATSlocal_void (tmp292) ;
// ATSlocal_void (tmp293) ;

__ats_lab_frame_delete_46:
tmp287 = frame_find_37 () ;
tmp288 = atspre_igte (tmp287, 0) ;
if (tmp288) {
/* tmp289 = */ total_number_of_filled_lines_inc_44 () ;
/* tmp290 = */ frame_line_flash_30 (tmp287) ;
/* tmp291 = */ print_score_45 () ;
/* tmp292 = */ aux3_51 (tmp287) ;
/* tmp293 = */ frame_display_34 () ;
goto __ats_lab_frame_delete_46 ; // tail call
} else {
/* empty */
} /* end of [if] */
return /* (tmp271) */ ;
} /* end of [frame_delete_46] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 9284(line=369, offs=7) -- 9574(line=378, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_53 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp298) ;
ATSlocal (ats_bool_type, tmp299) ;
ATSlocal (ats_bool_type, tmp300) ;
// ATSlocal_void (tmp301) ;
ATSlocal (ats_char_type, tmp302) ;
ATSlocal (ats_int_type, tmp303) ;
// ATSlocal_void (tmp304) ;
// ATSlocal_void (tmp305) ;
ATSlocal (ats_int_type, tmp306) ;

__ats_lab_aux_53:
tmp299 = atspre_ilt (arg0, env1) ;
if (tmp299) {
tmp300 = atspre_ilt (arg1, env2) ;
if (tmp300) {
tmp302 = matrix_get_elt_at__intsz_01658_ats_char_type (env3, arg0, env2, arg1) ;
/* tmp301 = */ print_block_23 (tmp302, env0) ;
tmp303 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp303 ;
goto __ats_lab_aux_53 ; // tail call
} else {
/* tmp304 = */ curs_backward_17 (env2) ;
/* tmp305 = */ curs_downward_15 (1) ;
tmp306 = atspre_iadd (arg0, 1) ;
arg0 = tmp306 ;
arg1 = 0 ;
goto __ats_lab_aux_53 ; // tail call
} /* end of [if] */
} else {
/* tmp298 = */ atslib_fflush_stdout () ;
} /* end of [if] */
return /* (tmp298) */ ;
} /* end of [aux_53] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_bool_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_int_type closure_env_2 ;
ats_ptr_type closure_env_3 ;
} aux_53_closure_type ;

ats_void_type
aux_53_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_53 (((aux_53_closure_type*)cloptr)->closure_env_0, ((aux_53_closure_type*)cloptr)->closure_env_1, ((aux_53_closure_type*)cloptr)->closure_env_2, ((aux_53_closure_type*)cloptr)->closure_env_3, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_53_closure_init (aux_53_closure_type *p_clo, ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_53_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_53_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
aux_53_closure_type *p_clo = ATS_MALLOC(sizeof(aux_53_closure_type)) ;
aux_53_closure_init (p_clo, env0, env1, env2, env3) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 9167(line=366, offs=4) -- 9594(line=381, offs=4)
*/
ATSstaticdec()
ats_void_type
display_shape_0_52 (ats_ptr_type arg0, ats_bool_type arg1) {
/* local vardec */
// ATSlocal_void (tmp294) ;
ATSlocal (ats_int_type, tmp295) ;
ATSlocal (ats_int_type, tmp296) ;
ATSlocal (ats_ptr_type, tmp297) ;

__ats_lab_display_shape_0_52:
tmp295 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp296 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp297 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
/* tmp294 = */ aux_53 (arg1, tmp295, tmp296, tmp297, 0, 0) ;
return /* (tmp294) */ ;
} /* end of [display_shape_0_52] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 9748(line=388, offs=7) -- 10038(line=397, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_55 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp311) ;
ATSlocal (ats_bool_type, tmp312) ;
ATSlocal (ats_bool_type, tmp313) ;
// ATSlocal_void (tmp314) ;
ATSlocal (ats_char_type, tmp315) ;
ATSlocal (ats_int_type, tmp316) ;
// ATSlocal_void (tmp317) ;
// ATSlocal_void (tmp318) ;
ATSlocal (ats_int_type, tmp319) ;
ATSlocal (ats_int_type, tmp320) ;

__ats_lab_aux_55:
tmp312 = atspre_ilt (arg1, env2) ;
if (tmp312) {
tmp313 = atspre_igte (arg0, 0) ;
if (tmp313) {
tmp315 = matrix_get_elt_at__intsz_01658_ats_char_type (env3, arg0, env2, arg1) ;
/* tmp314 = */ print_block_23 (tmp315, env0) ;
tmp316 = atspre_isub (arg0, 1) ;
arg0 = tmp316 ;
arg1 = arg1 ;
goto __ats_lab_aux_55 ; // tail call
} else {
/* tmp317 = */ curs_backward_17 (env1) ;
/* tmp318 = */ curs_downward_15 (1) ;
tmp319 = atspre_isub (env1, 1) ;
tmp320 = atspre_iadd (arg1, 1) ;
arg0 = tmp319 ;
arg1 = tmp320 ;
goto __ats_lab_aux_55 ; // tail call
} /* end of [if] */
} else {
/* tmp311 = */ atslib_fflush_stdout () ;
} /* end of [if] */
return /* (tmp311) */ ;
} /* end of [aux_55] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_bool_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_int_type closure_env_2 ;
ats_ptr_type closure_env_3 ;
} aux_55_closure_type ;

ats_void_type
aux_55_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_55 (((aux_55_closure_type*)cloptr)->closure_env_0, ((aux_55_closure_type*)cloptr)->closure_env_1, ((aux_55_closure_type*)cloptr)->closure_env_2, ((aux_55_closure_type*)cloptr)->closure_env_3, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_55_closure_init (aux_55_closure_type *p_clo, ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_55_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_55_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
aux_55_closure_type *p_clo = ATS_MALLOC(sizeof(aux_55_closure_type)) ;
aux_55_closure_init (p_clo, env0, env1, env2, env3) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 9631(line=385, offs=4) -- 10075(line=400, offs=4)
*/
ATSstaticdec()
ats_void_type
display_shape_1_54 (ats_ptr_type arg0, ats_bool_type arg1) {
/* local vardec */
// ATSlocal_void (tmp307) ;
ATSlocal (ats_int_type, tmp308) ;
ATSlocal (ats_int_type, tmp309) ;
ATSlocal (ats_ptr_type, tmp310) ;
ATSlocal (ats_int_type, tmp321) ;

__ats_lab_display_shape_1_54:
tmp308 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp309 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp310 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
tmp321 = atspre_isub (tmp308, 1) ;
/* tmp307 = */ aux_55 (arg1, tmp308, tmp309, tmp310, tmp321, 0) ;
return /* (tmp307) */ ;
} /* end of [display_shape_1_54] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 10225(line=405, offs=7) -- 10502(line=414, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_57 (ats_bool_type env0, ats_int_type env1, ats_ptr_type env2, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp326) ;
ATSlocal (ats_bool_type, tmp327) ;
ATSlocal (ats_bool_type, tmp328) ;
// ATSlocal_void (tmp329) ;
ATSlocal (ats_char_type, tmp330) ;
ATSlocal (ats_int_type, tmp331) ;
// ATSlocal_void (tmp332) ;
// ATSlocal_void (tmp333) ;
ATSlocal (ats_int_type, tmp334) ;
ATSlocal (ats_int_type, tmp335) ;

__ats_lab_aux_57:
tmp327 = atspre_igte (arg0, 0) ;
if (tmp327) {
tmp328 = atspre_igte (arg1, 0) ;
if (tmp328) {
tmp330 = matrix_get_elt_at__intsz_01658_ats_char_type (env2, arg0, env1, arg1) ;
/* tmp329 = */ print_block_23 (tmp330, env0) ;
tmp331 = atspre_isub (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp331 ;
goto __ats_lab_aux_57 ; // tail call
} else {
/* tmp332 = */ curs_backward_17 (env1) ;
/* tmp333 = */ curs_downward_15 (1) ;
tmp334 = atspre_isub (arg0, 1) ;
tmp335 = atspre_isub (env1, 1) ;
arg0 = tmp334 ;
arg1 = tmp335 ;
goto __ats_lab_aux_57 ; // tail call
} /* end of [if] */
} else {
/* tmp326 = */ atslib_fflush_stdout () ;
} /* end of [if] */
return /* (tmp326) */ ;
} /* end of [aux_57] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_bool_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_ptr_type closure_env_2 ;
} aux_57_closure_type ;

ats_void_type
aux_57_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_57 (((aux_57_closure_type*)cloptr)->closure_env_0, ((aux_57_closure_type*)cloptr)->closure_env_1, ((aux_57_closure_type*)cloptr)->closure_env_2, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_57_closure_init (aux_57_closure_type *p_clo, ats_bool_type env0, ats_int_type env1, ats_ptr_type env2) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_57_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_57_closure_make (ats_bool_type env0, ats_int_type env1, ats_ptr_type env2) {
aux_57_closure_type *p_clo = ATS_MALLOC(sizeof(aux_57_closure_type)) ;
aux_57_closure_init (p_clo, env0, env1, env2) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 10108(line=402, offs=4) -- 10541(line=417, offs=4)
*/
ATSstaticdec()
ats_void_type
display_shape_2_56 (ats_ptr_type arg0, ats_bool_type arg1) {
/* local vardec */
// ATSlocal_void (tmp322) ;
ATSlocal (ats_int_type, tmp323) ;
ATSlocal (ats_int_type, tmp324) ;
ATSlocal (ats_ptr_type, tmp325) ;
ATSlocal (ats_int_type, tmp336) ;
ATSlocal (ats_int_type, tmp337) ;

__ats_lab_display_shape_2_56:
tmp323 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp324 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp325 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
tmp336 = atspre_isub (tmp323, 1) ;
tmp337 = atspre_isub (tmp324, 1) ;
/* tmp322 = */ aux_57 (arg1, tmp324, tmp325, tmp336, tmp337) ;
return /* (tmp322) */ ;
} /* end of [display_shape_2_56] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 10691(line=422, offs=7) -- 10981(line=431, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_59 (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp342) ;
ATSlocal (ats_bool_type, tmp343) ;
ATSlocal (ats_bool_type, tmp344) ;
// ATSlocal_void (tmp345) ;
ATSlocal (ats_char_type, tmp346) ;
ATSlocal (ats_int_type, tmp347) ;
// ATSlocal_void (tmp348) ;
// ATSlocal_void (tmp349) ;
ATSlocal (ats_int_type, tmp350) ;

__ats_lab_aux_59:
tmp343 = atspre_igte (arg1, 0) ;
if (tmp343) {
tmp344 = atspre_ilt (arg0, env1) ;
if (tmp344) {
tmp346 = matrix_get_elt_at__intsz_01658_ats_char_type (env3, arg0, env2, arg1) ;
/* tmp345 = */ print_block_23 (tmp346, env0) ;
tmp347 = atspre_iadd (arg0, 1) ;
arg0 = tmp347 ;
arg1 = arg1 ;
goto __ats_lab_aux_59 ; // tail call
} else {
/* tmp348 = */ curs_backward_17 (env1) ;
/* tmp349 = */ curs_downward_15 (1) ;
tmp350 = atspre_isub (arg1, 1) ;
arg0 = 0 ;
arg1 = tmp350 ;
goto __ats_lab_aux_59 ; // tail call
} /* end of [if] */
} else {
/* tmp342 = */ atslib_fflush_stdout () ;
} /* end of [if] */
return /* (tmp342) */ ;
} /* end of [aux_59] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_bool_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_int_type closure_env_2 ;
ats_ptr_type closure_env_3 ;
} aux_59_closure_type ;

ats_void_type
aux_59_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_59 (((aux_59_closure_type*)cloptr)->closure_env_0, ((aux_59_closure_type*)cloptr)->closure_env_1, ((aux_59_closure_type*)cloptr)->closure_env_2, ((aux_59_closure_type*)cloptr)->closure_env_3, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_59_closure_init (aux_59_closure_type *p_clo, ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_59_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_59_closure_make (ats_bool_type env0, ats_int_type env1, ats_int_type env2, ats_ptr_type env3) {
aux_59_closure_type *p_clo = ATS_MALLOC(sizeof(aux_59_closure_type)) ;
aux_59_closure_init (p_clo, env0, env1, env2, env3) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 10574(line=419, offs=4) -- 11018(line=434, offs=4)
*/
ATSstaticdec()
ats_void_type
display_shape_3_58 (ats_ptr_type arg0, ats_bool_type arg1) {
/* local vardec */
// ATSlocal_void (tmp338) ;
ATSlocal (ats_int_type, tmp339) ;
ATSlocal (ats_int_type, tmp340) ;
ATSlocal (ats_ptr_type, tmp341) ;
ATSlocal (ats_int_type, tmp351) ;

__ats_lab_display_shape_3_58:
tmp339 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp340 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp341 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
tmp351 = atspre_isub (tmp340, 1) ;
/* tmp338 = */ aux_59 (arg1, tmp339, tmp340, tmp341, 0, tmp351) ;
return /* (tmp338) */ ;
} /* end of [display_shape_3_58] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 11051(line=436, offs=4) -- 11599(line=454, offs=4)
*/
ATSstaticdec()
ats_void_type
display_shape_at_60 (ats_ptr_type arg0, ats_bool_type arg1, ats_int_type arg2, ats_int_type arg3, ats_int_type arg4) {
/* local vardec */
// ATSlocal_void (tmp352) ;
ATSlocal (ats_int_type, tmp353) ;
ATSlocal (ats_int_type, tmp354) ;
ATSlocal (ats_int_type, tmp355) ;
ATSlocal (ats_int_type, tmp356) ;
// ATSlocal_void (tmp357) ;
ATSlocal (ats_int_type, tmp358) ;
ATSlocal (ats_int_type, tmp359) ;
// ATSlocal_void (tmp360) ;
ATSlocal (ats_int_type, tmp361) ;
ATSlocal (ats_int_type, tmp362) ;
ATSlocal (ats_int_type, tmp363) ;
// ATSlocal_void (tmp364) ;
ATSlocal (ats_int_type, tmp365) ;
ATSlocal (ats_int_type, tmp366) ;
ATSlocal (ats_int_type, tmp367) ;
ATSlocal (ats_int_type, tmp368) ;
// ATSlocal_void (tmp369) ;
ATSlocal (ats_int_type, tmp370) ;
ATSlocal (ats_int_type, tmp371) ;
ATSlocal (ats_int_type, tmp372) ;

__ats_lab_display_shape_at_60:
tmp353 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
tmp354 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp355 = atspre_nhalf (tmp353) ;
tmp356 = atspre_nhalf (tmp354) ;
do {
/* branch: __ats_lab_8 */
__ats_lab_8_0:
if (arg2 != 0) { goto __ats_lab_9_0 ; }
__ats_lab_8_1:
tmp358 = atspre_isub (arg3, tmp355) ;
tmp359 = atspre_isub (arg4, tmp356) ;
/* tmp357 = */ curs_goto_18 (tmp358, tmp359) ;
/* tmp352 = */ display_shape_0_52 (arg0, arg1) ;
break ;

/* branch: __ats_lab_9 */
__ats_lab_9_0:
if (arg2 != 1) { goto __ats_lab_10_0 ; }
__ats_lab_9_1:
tmp361 = atspre_isub (arg3, tmp356) ;
tmp363 = atspre_iadd (arg4, tmp355) ;
tmp362 = atspre_isub (tmp363, tmp353) ;
/* tmp360 = */ curs_goto_18 (tmp361, tmp362) ;
/* tmp352 = */ display_shape_1_54 (arg0, arg1) ;
break ;

/* branch: __ats_lab_10 */
__ats_lab_10_0:
if (arg2 != 2) { goto __ats_lab_11_0 ; }
__ats_lab_10_1:
tmp366 = atspre_iadd (arg3, tmp355) ;
tmp365 = atspre_isub (tmp366, tmp353) ;
tmp368 = atspre_iadd (arg4, tmp356) ;
tmp367 = atspre_isub (tmp368, tmp354) ;
/* tmp364 = */ curs_goto_18 (tmp365, tmp367) ;
/* tmp352 = */ display_shape_2_56 (arg0, arg1) ;
break ;

/* branch: __ats_lab_11 */
__ats_lab_11_0:
// if (arg2 != 3) { ats_deadcode_failure_handle () ; }
__ats_lab_11_1:
tmp371 = atspre_iadd (arg3, tmp356) ;
tmp370 = atspre_isub (tmp371, tmp354) ;
tmp372 = atspre_isub (arg4, tmp355) ;
/* tmp369 = */ curs_goto_18 (tmp370, tmp372) ;
/* tmp352 = */ display_shape_3_58 (arg0, arg1) ;
break ;
} while (0) ;
return /* (tmp352) */ ;
} /* end of [display_shape_at_60] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 11898(line=474, offs=4) -- 12012(line=475, offs=58)
*/
ATSstaticdec()
ats_void_type
shapeObj_display_61 (ats_ref_type arg0) {
/* local vardec */
// ATSlocal_void (tmp373) ;
ATSlocal (ats_ptr_type, tmp374) ;
ATSlocal (ats_int_type, tmp375) ;
ATSlocal (ats_int_type, tmp376) ;
ATSlocal (ats_int_type, tmp377) ;

__ats_lab_shapeObj_display_61:
tmp374 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp375 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp376 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp377 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
/* tmp373 = */ display_shape_at_60 (tmp374, ats_true_bool, tmp375, tmp376, tmp377) ;
return /* (tmp373) */ ;
} /* end of [shapeObj_display_61] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 12017(line=477, offs=4) -- 12134(line=478, offs=59)
*/
ATSstaticdec()
ats_void_type
shapeObj_undisplay_62 (ats_ref_type arg0) {
/* local vardec */
// ATSlocal_void (tmp378) ;
ATSlocal (ats_ptr_type, tmp379) ;
ATSlocal (ats_int_type, tmp380) ;
ATSlocal (ats_int_type, tmp381) ;
ATSlocal (ats_int_type, tmp382) ;

__ats_lab_shapeObj_undisplay_62:
tmp379 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp380 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp381 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp382 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
/* tmp378 = */ display_shape_at_60 (tmp379, ats_false_bool, tmp380, tmp381, tmp382) ;
return /* (tmp378) */ ;
} /* end of [shapeObj_undisplay_62] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 12167(line=481, offs=4) -- 12361(line=484, offs=9)
*/
ATSstaticdec()
ats_int_type
shapeObj_downward_63 (ats_ref_type arg0) {
/* local vardec */
ATSlocal (ats_int_type, tmp383) ;
ATSlocal (ats_bool_type, tmp384) ;
ATSlocal (ats_ptr_type, tmp385) ;
ATSlocal (ats_int_type, tmp386) ;
ATSlocal (ats_int_type, tmp387) ;
ATSlocal (ats_int_type, tmp388) ;
ATSlocal (ats_int_type, tmp389) ;
// ATSlocal_void (tmp390) ;
ATSlocal (ats_int_type, tmp391) ;
ATSlocal (ats_int_type, tmp392) ;
// ATSlocal_void (tmp393) ;

__ats_lab_shapeObj_downward_63:
tmp385 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp386 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp388 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp387 = atspre_iadd (tmp388, 1) ;
tmp389 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp384 = move_test_24 (tmp385, tmp386, tmp387, tmp389) ;
if (tmp384) {
/* tmp390 = */ shapeObj_undisplay_62 (arg0) ;
tmp392 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp391 = atspre_iadd (tmp392, 1) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) = tmp391 ;
/* tmp393 = */ shapeObj_display_61 (arg0) ;
tmp383 = 0 ;
} else {
tmp383 = 1 ;
} /* end of [if] */
return (tmp383) ;
} /* end of [shapeObj_downward_63] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 12391(line=488, offs=4) -- 13798(line=534, offs=4)
*/
ATSstaticdec()
ats_void_type
shapeObj_falling_64 (ats_ref_type arg0) {
/* local vardec */
// ATSlocal_void (tmp394) ;
ATSlocal (ats_int_type, tmp395) ;
// ATSlocal_void (tmp396) ;
ATSlocal (ats_bool_type, tmp397) ;
ATSlocal (ats_bool_type, tmp398) ;
ATSlocal (ats_ptr_type, tmp399) ;
ATSlocal (ats_int_type, tmp400) ;
ATSlocal (ats_int_type, tmp401) ;
ATSlocal (ats_ptr_type, tmp402) ;
ATSlocal (ats_bool_type, tmp403) ;
ATSlocal (ats_int_type, tmp404) ;
// ATSlocal_void (tmp405) ;
ATSlocal (ats_bool_type, tmp406) ;
ATSlocal (ats_int_type, tmp407) ;
ATSlocal (ats_char_type, tmp408) ;
ATSlocal (ats_bool_type, tmp409) ;
ATSlocal (ats_ptr_type, tmp410) ;
ATSlocal (ats_int_type, tmp411) ;
ATSlocal (ats_int_type, tmp412) ;
ATSlocal (ats_int_type, tmp413) ;
ATSlocal (ats_int_type, tmp414) ;
// ATSlocal_void (tmp415) ;
ATSlocal (ats_int_type, tmp416) ;
ATSlocal (ats_int_type, tmp417) ;
ATSlocal (ats_bool_type, tmp418) ;
ATSlocal (ats_ptr_type, tmp419) ;
ATSlocal (ats_int_type, tmp420) ;
ATSlocal (ats_int_type, tmp421) ;
ATSlocal (ats_int_type, tmp422) ;
ATSlocal (ats_int_type, tmp423) ;
// ATSlocal_void (tmp424) ;
ATSlocal (ats_int_type, tmp425) ;
ATSlocal (ats_int_type, tmp426) ;
ATSlocal (ats_int_type, tmp427) ;
ATSlocal (ats_int_type, tmp428) ;
ATSlocal (ats_int_type, tmp429) ;
ATSlocal (ats_bool_type, tmp430) ;
ATSlocal (ats_ptr_type, tmp431) ;
ATSlocal (ats_int_type, tmp432) ;
ATSlocal (ats_int_type, tmp433) ;
// ATSlocal_void (tmp434) ;
ATSlocal (ats_int_type, tmp435) ;
ATSlocal (ats_int_type, tmp436) ;
ATSlocal (ats_int_type, tmp437) ;
ATSlocal (ats_bool_type, tmp438) ;
ATSlocal (ats_ptr_type, tmp439) ;
ATSlocal (ats_int_type, tmp440) ;
ATSlocal (ats_int_type, tmp441) ;
// ATSlocal_void (tmp442) ;
ATSlocal (ats_bool_type, tmp444) ;
ATSlocal (ats_int_type, tmp445) ;
ATSlocal (ats_int_type, tmp446) ;
ATSlocal (ats_int_type, tmp447) ;
ATSlocal (ats_int_type, tmp448) ;
ATSlocal (ats_int_type, tmp449) ;
// ATSlocal_void (tmp450) ;
ATSlocal (ats_ptr_type, tmp451) ;
ATSlocal (ats_int_type, tmp452) ;
ATSlocal (ats_int_type, tmp453) ;
ATSlocal (ats_int_type, tmp454) ;

__ats_lab_shapeObj_falling_64:
/* ats_int_type tmp395 ; */
tmp395 = 0 ;
tmp399 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp400 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp401 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp398 = move_test_24 (tmp399, 0, tmp400, tmp401) ;
tmp397 = atspre_neg_bool (tmp398) ;
if (tmp397) {
tmp402 = (ats_sum_ptr_type)(&ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException) ;
/* tmp396 = */ ats_raise_exn (tmp402) ;
} else {
/* empty */
} /* end of [if] */
/* loop initialization */
/* empty */
ats_loop_beg_mac(__ats_lab_12)
tmp403 = atspre_lt_int_int (tmp395, 1) ;
if (!tmp403) break ;
tmp404 = atslib_usleep (1000) ;
tmp406 = kbhit () ;
if (tmp406) {
tmp407 = readch () ;
tmp408 = atspre_char_of_int (tmp407) ;
do {
/* branch: __ats_lab_14 */
__ats_lab_14_0:
if (tmp408 != ' ') { goto __ats_lab_15_0 ; }
__ats_lab_14_1:
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_lim) = 0 ;
break ;

/* branch: __ats_lab_15 */
__ats_lab_15_0:
if (tmp408 != 'l') { goto __ats_lab_16_0 ; }
__ats_lab_15_1:
tmp410 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp411 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp412 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp414 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp413 = atspre_iadd (tmp414, 1) ;
tmp409 = move_test_24 (tmp410, tmp411, tmp412, tmp413) ;
if (tmp409) {
/* tmp415 = */ shapeObj_undisplay_62 (arg0) ;
tmp417 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp416 = atspre_iadd (tmp417, 1) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) = tmp416 ;
/* tmp405 = */ shapeObj_display_61 (arg0) ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_16 */
__ats_lab_16_0:
if (tmp408 != 'j') { goto __ats_lab_17_0 ; }
__ats_lab_16_1:
tmp419 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp420 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp421 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp423 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp422 = atspre_isub (tmp423, 1) ;
tmp418 = move_test_24 (tmp419, tmp420, tmp421, tmp422) ;
if (tmp418) {
/* tmp424 = */ shapeObj_undisplay_62 (arg0) ;
tmp426 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp425 = atspre_isub (tmp426, 1) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) = tmp425 ;
/* tmp405 = */ shapeObj_display_61 (arg0) ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_17 */
__ats_lab_17_0:
if (tmp408 != 'i') { goto __ats_lab_18_0 ; }
__ats_lab_17_1:
tmp429 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp428 = atspre_iadd (tmp429, 3) ;
tmp427 = atspre_nmod (tmp428, 4) ;
tmp431 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp432 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp433 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp430 = move_test_24 (tmp431, tmp427, tmp432, tmp433) ;
if (tmp430) {
/* tmp434 = */ shapeObj_undisplay_62 (arg0) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) = tmp427 ;
/* tmp405 = */ shapeObj_display_61 (arg0) ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_18 */
__ats_lab_18_0:
if (tmp408 != 'k') { goto __ats_lab_19_0 ; }
__ats_lab_18_1:
tmp437 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp436 = atspre_iadd (tmp437, 1) ;
tmp435 = atspre_nmod (tmp436, 4) ;
tmp439 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp440 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp441 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
tmp438 = move_test_24 (tmp439, tmp435, tmp440, tmp441) ;
if (tmp438) {
/* tmp442 = */ shapeObj_undisplay_62 (arg0) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) = tmp435 ;
/* tmp405 = */ shapeObj_display_61 (arg0) ;
} else {
/* empty */
} /* end of [if] */
break ;

/* branch: __ats_lab_19 */
__ats_lab_19_0:
__ats_lab_19_1:
break ;
} while (0) ;
} else {
/* empty */
} /* end of [if] */
tmp445 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_acc) ;
tmp446 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_lim) ;
tmp444 = atspre_igte (tmp445, tmp446) ;
if (tmp444) {
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_acc) = 0 ;
tmp447 = shapeObj_downward_63 (arg0) ;
tmp395 = tmp447 ;
} else {
tmp449 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_acc) ;
tmp448 = atspre_iadd (tmp449, 1) ;
ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_speed_acc) = tmp448 ;
} /* end of [if] */
ats_loop_end_mac(__ats_lab_12, __ats_lab_13)
tmp451 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_shape) ;
tmp452 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_rot) ;
tmp453 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_xpos) ;
tmp454 = ats_select_mac(ats_ptrget_mac(anairiats_rec_4, arg0), atslab_ypos) ;
/* tmp450 = */ absorb_26 (tmp451, tmp452, tmp453, tmp454) ;
/* tmp394 = */ frame_delete_46 () ;
return /* (tmp394) */ ;
} /* end of [shapeObj_falling_64] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 13853(line=538, offs=4) -- 13966(line=541, offs=2)
*/
ATSstaticdec()
ats_ptr_type
shape_make_65 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp455) ;

__ats_lab_shape_make_65:
tmp455 = ATS_MALLOC(sizeof(anairiats_rec_2)) ;
ats_selptrset_mac(anairiats_rec_2, tmp455, atslab_row, arg1) ;
ats_selptrset_mac(anairiats_rec_2, tmp455, atslab_col, arg2) ;
ats_selptrset_mac(anairiats_rec_2, tmp455, atslab_mat, arg0) ;

return (tmp455) ;
} /* end of [shape_make_65] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 13971(line=543, offs=4) -- 14367(line=556, offs=4)
*/
ATSstaticdec()
ats_ptr_type
shapeObj_make_66 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp456) ;
ATSlocal (ats_ptr_type, tmp457) ;
ATSlocal (ats_ptr_type, tmp458) ;
ATSlocal (ats_int_type, tmp459) ;
ATSlocal (ats_int_type, tmp460) ;
ATSlocal (ats_int_type, tmp461) ;
ATSlocal (ats_int_type, tmp462) ;
ATSlocal (ats_int_type, tmp463) ;

__ats_lab_shapeObj_make_66:
tmp457 = atspre_ptr_alloc_tsz (sizeof(anairiats_rec_4)) ;
tmp458 = ats_selsin_mac(tmp457, atslab_2) ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_rot) = 0 ;
tmp459 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_row) ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_xlen) = tmp459 ;
tmp460 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_ylen) = tmp460 ;
tmp462 = ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_xlen) ;
tmp461 = atspre_nhalf (tmp462) ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_xpos) = tmp461 ;
tmp463 = atspre_nhalf (20) ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_ypos) = tmp463 ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_speed_lim) = 100 ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_speed_acc) = 100 ;
ats_selptr_mac(ats_castptr_mac(anairiats_rec_4, tmp458), atslab_shape) = arg0 ;
tmp456 = tmp458 ;
return (tmp456) ;
} /* end of [shapeObj_make_66] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 14554(line=564, offs=7) -- 14824(line=573, offs=8)
*/
ATSstaticdec()
ats_void_type
aux_68 (ats_int_type env0, ats_int_type env1, ats_char_type env2, ats_int_type env3, ats_ptr_type env4, ats_int_type arg0, ats_int_type arg1) {
/* local vardec */
// ATSlocal_void (tmp467) ;
ATSlocal (ats_bool_type, tmp468) ;
ATSlocal (ats_bool_type, tmp469) ;
// ATSlocal_void (tmp470) ;
ATSlocal (ats_int_type, tmp471) ;
ATSlocal (ats_int_type, tmp472) ;
ATSlocal (ats_int_type, tmp473) ;
ATSlocal (ats_int_type, tmp474) ;
ATSlocal (ats_int_type, tmp475) ;
ATSlocal (ats_int_type, tmp476) ;

__ats_lab_aux_68:
tmp468 = atspre_ilt (arg0, 2) ;
if (tmp468) {
tmp469 = atspre_ilt (arg1, 2) ;
if (tmp469) {
tmp472 = atspre_imul (env0, 2) ;
tmp471 = atspre_iadd (tmp472, arg0) ;
tmp474 = atspre_imul (env1, 2) ;
tmp473 = atspre_iadd (tmp474, arg1) ;
/* tmp470 = */ matrix_set_elt_at__intsz_01659_ats_char_type (env4, tmp471, env3, tmp473, env2) ;
tmp475 = atspre_iadd (arg1, 1) ;
arg0 = arg0 ;
arg1 = tmp475 ;
goto __ats_lab_aux_68 ; // tail call
} else {
tmp476 = atspre_iadd (arg0, 1) ;
arg0 = tmp476 ;
arg1 = 0 ;
goto __ats_lab_aux_68 ; // tail call
} /* end of [if] */
} else {
/* empty */
} /* end of [if] */
return /* (tmp467) */ ;
} /* end of [aux_68] */

typedef struct {
ats_fun_ptr_type closure_fun ;
ats_int_type closure_env_0 ;
ats_int_type closure_env_1 ;
ats_char_type closure_env_2 ;
ats_int_type closure_env_3 ;
ats_ptr_type closure_env_4 ;
} aux_68_closure_type ;

ats_void_type
aux_68_clofun (ats_clo_ptr_type cloptr, ats_int_type arg0, ats_int_type arg1) {
aux_68 (((aux_68_closure_type*)cloptr)->closure_env_0, ((aux_68_closure_type*)cloptr)->closure_env_1, ((aux_68_closure_type*)cloptr)->closure_env_2, ((aux_68_closure_type*)cloptr)->closure_env_3, ((aux_68_closure_type*)cloptr)->closure_env_4, arg0, arg1) ; return ;
} /* end of function */

ATSinline()
ats_void_type
aux_68_closure_init (aux_68_closure_type *p_clo, ats_int_type env0, ats_int_type env1, ats_char_type env2, ats_int_type env3, ats_ptr_type env4) {
p_clo->closure_fun = (ats_fun_ptr_type)&aux_68_clofun ;
p_clo->closure_env_0 = env0 ;
p_clo->closure_env_1 = env1 ;
p_clo->closure_env_2 = env2 ;
p_clo->closure_env_3 = env3 ;
p_clo->closure_env_4 = env4 ;
return ;
} /* end of function */

ats_clo_ptr_type
aux_68_closure_make (ats_int_type env0, ats_int_type env1, ats_char_type env2, ats_int_type env3, ats_ptr_type env4) {
aux_68_closure_type *p_clo = ATS_MALLOC(sizeof(aux_68_closure_type)) ;
aux_68_closure_init (p_clo, env0, env1, env2, env3, env4) ;
return (ats_clo_ptr_type)p_clo ;
} /* end of function */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 14416(line=560, offs=4) -- 14859(line=576, offs=4)
*/
ATSstaticdec()
ats_void_type
set_block_at_67 (ats_ptr_type arg0, ats_int_type arg1, ats_int_type arg2, ats_char_type arg3) {
/* local vardec */
// ATSlocal_void (tmp464) ;
ATSlocal (ats_int_type, tmp465) ;
ATSlocal (ats_ptr_type, tmp466) ;

__ats_lab_set_block_at_67:
tmp465 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_col) ;
tmp466 = ats_selbox_mac(ats_castptr_mac(anairiats_rec_2, arg0), atslab_mat) ;
/* tmp464 = */ aux_68 (arg1, arg2, arg3, tmp465, tmp466, 0, 0) ;
return /* (tmp464) */ ;
} /* end of [set_block_at_67] */

/*
// /home/hwxi/Research/ATS-Anairiats/prelude/DATS/array.dats: 15030(line=538, offs=25) -- 15125(line=542, offs=4)
*/
ATSstaticdec()
ats_ptr_type
array_get_elt_at__intsz_01617_ats_ptr_type (ats_ptr_type arg0, ats_int_type arg1) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp534) ;
ATSlocal (ats_size_type, tmp535) ;
ATSlocal (ats_ptr_type, tmp536) ;

__ats_lab_array_get_elt_at__intsz_01617_ats_ptr_type:
tmp535 = atspre_size1_of_int1 (arg1) ;
tmp536 = ats_selsin_mac(arg0, atslab_data) ;
tmp534 = ats_caselptrind_mac(ats_ptr_type, tmp536, [tmp535]) ;
return (tmp534) ;
} /* end of [array_get_elt_at__intsz_01617_ats_ptr_type] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 16986(line=744, offs=4) -- 17136(line=751, offs=4)
*/
ATSstaticdec()
ats_ptr_type
gen_shape_obj_69 () {
/* local vardec */
ATSlocal (ats_ptr_type, tmp531) ;
ATSlocal (ats_int_type, tmp532) ;
ATSlocal (ats_ptr_type, tmp533) ;

__ats_lab_gen_shape_obj_69:
tmp532 = natrand48 (7) ;
tmp533 = array_get_elt_at__intsz_01617_ats_ptr_type (statmp528, tmp532) ;
tmp531 = shapeObj_make_66 (tmp533) ;
return (tmp531) ;
} /* end of [gen_shape_obj_69] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 17298(line=760, offs=7) -- 17452(line=766, offs=6)
*/
ATSstaticdec()
ats_void_type
loop_72 () {
/* local vardec */
// ATSlocal_void (tmp541) ;
ATSlocal (ats_ptr_type, tmp542) ;
ATSlocal (ats_ptr_type, tmp543) ;
// ATSlocal_void (tmp544) ;
// ATSlocal_void (tmp545) ;

__ats_lab_loop_72:
tmp542 = gen_shape_obj_69 () ;
tmp543 = ats_selsin_mac(tmp542, atslab_2) ;
/* tmp544 = */ shapeObj_falling_64 (tmp543) ;
/* tmp545 = */ atspre_ptr_free (tmp543) ;
goto __ats_lab_loop_72 ; // tail call
return /* (tmp541) */ ;
} /* end of [loop_72] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 17188(line=755, offs=4) -- 18104(line=791, offs=4)
*/
ATSstaticdec()
ats_void_type
tetrix_71 () {
/* local vardec */
// ATSlocal_void (tmp537) ;
// ATSlocal_void (tmp538) ;
ATSlocal (ats_ptr_type, tmp539) ;
ATSlocal (ats_ptr_type, tmp540) ;
// ATSlocal_void (tmp546) ;
// ATSlocal_void (tmp547) ;
// ATSlocal_void (tmp548) ;
// ATSlocal_void (tmp549) ;
// ATSlocal_void (tmp550) ;
// ATSlocal_void (tmp551) ;
ATSlocal (ats_int_type, tmp552) ;
// ATSlocal_void (tmp553) ;
// ATSlocal_void (tmp554) ;
ATSlocal (ats_bool_type, tmp555) ;
ATSlocal (ats_int_type, tmp556) ;
ATSlocal (ats_int_type, tmp557) ;
// ATSlocal_void (tmp558) ;
ATSlocal (ats_int_type, tmp559) ;
// ATSlocal_void (tmp560) ;
// ATSlocal_void (tmp561) ;
// ATSlocal_void (tmp562) ;
// ATSlocal_void (tmp563) ;
ATSlocal (ats_ptr_type, tmp564) ;
// ATSlocal_void (tmp565) ;
// ATSlocal_void (tmp566) ;
// ATSlocal_void (tmp567) ;
// ATSlocal_void (tmp568) ;
ATSlocal (ats_int_type, tmp569) ;
// ATSlocal_void (tmp570) ;
// ATSlocal_void (tmp571) ;

__ats_lab_tetrix_71:
/* tmp538 = */ atslib_srand48_with_time () ;
tmp539 = atspre_stdin_get () ;
tmp540 = ats_selsin_mac(tmp539, atslab_1) ;
/* tmp546 = */ save_set_keyboard () ;
/* tmp547 = */ atspre_print_string (ATSstrcst("\033[H\033[2J")) ;
/* tmp548 = */ atslib_fflush_stdout () ;
/* tmp549 = */ print_usage_41 () ;
/* tmp550 = */ curs_home_11 () ;
tmp552 = atspre_iadd (3, 1) ;
/* tmp551 = */ curs_downward_15 (tmp552) ;
/* tmp553 = */ print_frame_22 () ;
/* tmp554 = */ curs_invisible_12 () ;
/* loop initialization */
/* empty */
ats_loop_beg_mac(__ats_lab_20)
tmp556 = atslib_fgetc_err (tmp540) ;
tmp557 = atspre_int_of_char ('\n') ;
tmp555 = atspre_neq_int_int (tmp556, tmp557) ;
if (!tmp555) break ;
/* empty */
ats_loop_end_mac(__ats_lab_20, __ats_lab_21)
tmp559 = atspre_iadd (20, 4) ;
/* tmp558 = */ curs_goto_18 (2, tmp559) ;
/* tmp560 = */ atspre_print_string (ATSstrcst("score: ")) ;
/* tmp561 = */ print_score_45 () ;
ATS_TRYWITH_TRY(tmp564)
/* tmp563 = */ loop_72 () ;
/* tmp562 = tmp563 */ ;
ATS_TRYWITH_WITH(tmp564)
do {
/* branch: __ats_lab_22 */
__ats_lab_22_0:
if (tmp564 != &ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException) { ats_raise_exn (tmp564) ; }
__ats_lab_22_1:
/* tmp565 = */ curs_clear_10 () ;
/* tmp566 = */ curs_normal_13 () ;
/* tmp567 = */ atspre_print_string (ATSstrcst("Game Over! Your score is ")) ;
tmp569 = ats_ptrget_mac(ats_int_type, statmp258) ;
/* tmp568 = */ atspre_print_int (tmp569) ;
/* tmp570 = */ atspre_print_string (ATSstrcst(".")) ;
/* tmp571 = */ atspre_print_newline () ;
/* tmp562 = */ restore_keyboard () ;
break ;
} while (0) ;
ATS_TRYWITH_END() ;

/* tmp537 = */ atspre_stdin_view_set () ;
return /* (tmp537) */ ;
} /* end of [tetrix_71] */

/*
// /home/hwxi/Research/ATS-Anairiats/doc/EXAMPLE/MISC/tetrix.dats: 18140(line=793, offs=16) -- 18226(line=795, offs=4)
*/
ATSglobaldec()
ats_void_type
mainats (ats_int_type arg0, ats_ref_type arg1) {
/* local vardec */
// ATSlocal_void (tmp572) ;
// ATSlocal_void (tmp573) ;
ATSlocal (ats_ptr_type, tmp574) ;
// ATSlocal_void (tmp575) ;

__ats_lab_mainats:
ATS_TRYWITH_TRY(tmp574)
/* tmp573 = */ tetrix_71 () ;
/* tmp572 = tmp573 */ ;
ATS_TRYWITH_WITH(tmp574)
do {
/* branch: __ats_lab_23 */
__ats_lab_23_0:
__ats_lab_23_1:
/* tmp575 = */ restore_keyboard () ;
/* tmp572 = */ ats_raise_exn (tmp574) ;
break ;
} while (0) ;
ATS_TRYWITH_END() ;

return /* (tmp572) */ ;
} /* end of [mainats] */

/* static load function */

extern ats_void_type ATS_2d0_2e2_2e12_2libc_2SATS_2random_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2libc_2SATS_2stdio_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2libc_2SATS_2unistd_2esats__staload (void) ;
// extern ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2matrix_2edats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2prelude_2DATS_2reference_2edats__staload (void) ;

ats_void_type
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__staload () {
static int ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__staload_flag = 0 ;
if (ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__staload_flag) return ;
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__staload_flag = 1 ;

ATS_2d0_2e2_2e12_2libc_2SATS_2random_2esats__staload () ;
ATS_2d0_2e2_2e12_2libc_2SATS_2stdio_2esats__staload () ;
ATS_2d0_2e2_2e12_2libc_2SATS_2unistd_2esats__staload () ;
// ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats__staload () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2matrix_2edats__staload () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2reference_2edats__staload () ;

ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException.tag = ats_exception_con_tag_new () ;
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException.name = "ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__GameIsOverException" ;
return ;
} /* staload function */

/* dynamic load function */

// dynload flag declaration
// extern ats_int_type ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__dynload_flag ;

ats_void_type
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__dynload () {
// ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__dynload_flag = 1 ;
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__staload () ;

#ifdef _ATS_PROOFCHECK
ATS_2d0_2e2_2e12_2prelude_2basics_dyn_2esats__file_mode_lte_r_r_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2SATS_2arith_2esats__mul_istot_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2SATS_2arith_2esats__mul_nat_nat_nat_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2SATS_2array_2esats__array_v_takeout2_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2SATS_2matrix_2esats__array_v_of_matrix_v_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2SATS_2matrix_2esats__matrix_v_of_array_v_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____copy_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____free_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____assert_prfck () ;
ATS_2d0_2e2_2e12_2prelude_2DATS_2array_2edats____assert_prfck () ;
#endif /* _ATS_PROOFCHECK */

/* marking static variables for GC */
ATS_GC_MARKROOT(&statmp0, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp14, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp15, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp16, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp258, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp477, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp478, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp479, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp480, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp481, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp482, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp483, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp484, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp485, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp486, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp487, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp488, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp489, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp490, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp491, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp492, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp493, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp496, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp497, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp498, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp499, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp500, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp501, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp504, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp505, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp506, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp507, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp508, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp509, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp512, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp513, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp514, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp515, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp516, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp517, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp520, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp521, sizeof(ats_int_type)) ;
ATS_GC_MARKROOT(&statmp522, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp523, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp524, sizeof(ats_size_type)) ;
ATS_GC_MARKROOT(&statmp525, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp528, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp529, sizeof(anairiats_rec_1)) ;
ATS_GC_MARKROOT(&statmp530, sizeof(ats_ptr_type)) ;

/* marking external values for GC */

/* code for dynamic loading */
statmp15 = atspre_iadd (28, 1) ;
statmp14 = atspre_size1_of_int1 (statmp15) ;
statmp16 = atspre_size1_of_int1 (20) ;
statmp0 = matrix_make_elt_01652_ats_char_type (statmp14, statmp16, ' ') ;
statmp258 = ref_make_elt_01089_ats_int_type (0) ;
statmp477 = atspre_imul (2, 2) ;
statmp478 = atspre_imul (2, 2) ;
statmp480 = atspre_size1_of_int1 (statmp477) ;
statmp481 = atspre_size1_of_int1 (statmp478) ;
statmp479 = matrix_make_elt_01652_ats_char_type (statmp480, statmp481, '@') ;
statmp482 = shape_make_65 (statmp479, statmp477, statmp478) ;
statmp483 = atspre_imul (4, 2) ;
statmp485 = atspre_size1_of_int1 (statmp483) ;
statmp486 = atspre_size1_of_int1 (2) ;
statmp484 = matrix_make_elt_01652_ats_char_type (statmp485, statmp486, '%') ;
statmp487 = shape_make_65 (statmp484, statmp483, 2) ;
statmp488 = atspre_imul (2, 2) ;
statmp489 = atspre_imul (3, 2) ;
statmp491 = atspre_size1_of_int1 (statmp488) ;
statmp492 = atspre_size1_of_int1 (statmp489) ;
statmp490 = matrix_make_elt_01652_ats_char_type (statmp491, statmp492, 'N') ;
statmp493 = shape_make_65 (statmp490, statmp488, statmp489) ;
/* statmp494 = */ set_block_at_67 (statmp493, 0, 0, ' ') ;
/* statmp495 = */ set_block_at_67 (statmp493, 0, 2, ' ') ;
statmp496 = atspre_imul (3, 2) ;
statmp497 = atspre_imul (2, 2) ;
statmp499 = atspre_size1_of_int1 (statmp496) ;
statmp500 = atspre_size1_of_int1 (statmp497) ;
statmp498 = matrix_make_elt_01652_ats_char_type (statmp499, statmp500, 'Z') ;
statmp501 = shape_make_65 (statmp498, statmp496, statmp497) ;
/* statmp502 = */ set_block_at_67 (statmp501, 1, 0, ' ') ;
/* statmp503 = */ set_block_at_67 (statmp501, 2, 0, ' ') ;
statmp504 = atspre_imul (3, 2) ;
statmp505 = atspre_imul (2, 2) ;
statmp507 = atspre_size1_of_int1 (statmp504) ;
statmp508 = atspre_size1_of_int1 (statmp505) ;
statmp506 = matrix_make_elt_01652_ats_char_type (statmp507, statmp508, 'Z') ;
statmp509 = shape_make_65 (statmp506, statmp504, statmp505) ;
/* statmp510 = */ set_block_at_67 (statmp509, 1, 1, ' ') ;
/* statmp511 = */ set_block_at_67 (statmp509, 2, 1, ' ') ;
statmp512 = atspre_imul (3, 2) ;
statmp513 = atspre_imul (2, 2) ;
statmp515 = atspre_size1_of_int1 (statmp512) ;
statmp516 = atspre_size1_of_int1 (statmp513) ;
statmp514 = matrix_make_elt_01652_ats_char_type (statmp515, statmp516, 'X') ;
statmp517 = shape_make_65 (statmp514, statmp512, statmp513) ;
/* statmp518 = */ set_block_at_67 (statmp517, 0, 1, ' ') ;
/* statmp519 = */ set_block_at_67 (statmp517, 2, 0, ' ') ;
statmp520 = atspre_imul (3, 2) ;
statmp521 = atspre_imul (2, 2) ;
statmp523 = atspre_size1_of_int1 (statmp520) ;
statmp524 = atspre_size1_of_int1 (statmp521) ;
statmp522 = matrix_make_elt_01652_ats_char_type (statmp523, statmp524, 'X') ;
statmp525 = shape_make_65 (statmp522, statmp520, statmp521) ;
/* statmp526 = */ set_block_at_67 (statmp525, 0, 0, ' ') ;
/* statmp527 = */ set_block_at_67 (statmp525, 2, 1, ' ') ;
/* array allocation on heap */
statmp529.atslab_2 = atspre_array_ptr_alloc_tsz (7, sizeof(ats_ptr_type)) ;
statmp529.atslab_3 = 7 ;

statmp530 = ats_select_mac(statmp529, atslab_2) ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [0]) = statmp482 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [1]) = statmp487 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [2]) = statmp493 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [3]) = statmp501 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [4]) = statmp509 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [5]) = statmp517 ;
ats_caselptrind_mac(ats_ptr_type, statmp530, [6]) = statmp525 ;
statmp528 = ATS_2d0_2e2_2e12_2prelude_2SATS_2array_2esats__array_make_arrpsz (statmp529) ;
return ;
} /* end of [dynload function] */

int main (int argc, char *argv[]) {
ATS_GC_INIT() ;
mainats_prelude() ;
ATS_2d0_2e2_2e12_2doc_2EXAMPLE_2MISC_2tetrix_2edats__dynload() ;
mainats((ats_int_type)argc, (ats_ptr_type)argv) ;
return (0) ;
} /* end of main */

/* external codes at mid */
/* external codes at bot */


#include <stdio.h>
#include <curses.h>

/*
* From the downloaded sources of the book
* "Beginning Linux Programming" - Wrox.
*
* Copyright Wrox Press.
* Licensed by the General Public License (GPL).
* See http://www.gnu.org/licenses/gpl.txt for details.
*/

#include <stdio.h>
#include <stdlib.h>
#include <termios.h>
#include <term.h>
#include <curses.h>
#include <unistd.h>

static struct termios initial_settings, new_settings;
static int peek_character = -1;

ats_void_type save_set_keyboard () {
  tcgetattr(0,&initial_settings);

  new_settings = initial_settings;
  new_settings.c_lflag &= ~ICANON;
  new_settings.c_lflag &= ~ECHO;
  new_settings.c_lflag &= ~ISIG;
  new_settings.c_cc[VMIN] = 1;
  new_settings.c_cc[VTIME] = 0;

  tcsetattr(0, TCSANOW, &new_settings);
}

ats_void_type restore_keyboard () {
  tcsetattr(0, TCSANOW, &initial_settings);
}

ats_int_type kbhit () {
  char ch;
  int nread;

  if (peek_character != -1) return 1;

  new_settings.c_cc[VMIN]=0;

  tcsetattr(0, TCSANOW, &new_settings);

  nread = read(0,&ch,1);

  new_settings.c_cc[VMIN]=1;

  tcsetattr(0, TCSANOW, &new_settings);

  if (nread == 1) { peek_character = ch; return 1; }

  return 0;
}

ats_int_type readch () {
  char ch;

  if (peek_character != -1) {
    ch = peek_character;
    peek_character = -1;
    return ch;
  }

  return -1;
}



/* ****** ****** */

/* end of [tetrix_dats.c] */
